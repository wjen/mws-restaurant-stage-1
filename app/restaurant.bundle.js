!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=10)}([function(n,e,t){"use strict";t.d(e,"a",function(){return i});var r=t(1);const o=Object(r.a)("rr-db",3,{upgrade(n,e){switch(e){case 0:n.createObjectStore("restaurants",{keyPath:"id"}).createIndex("id","id");case 1:n.createObjectStore("reviews",{keyPath:"id",autoIncrement:!0}).createIndex("restaurant_id","restaurant_id");case 2:n.createObjectStore("pending",{keyPath:"id",autoIncrement:!0})}}});class i{static get DATABASE_URL(){return"http://localhost:1337/restaurants"}static get DATABASE_REVIEWS_URL(){return"http://localhost:1337/reviews"}static fetchRestaurants(n){fetch(i.DATABASE_URL).then(function(e){e.json().then(function(e){n(null,e)})})}static fetchReviews(n,e){let t=i.DATABASE_REVIEWS_URL+"/?restaurant_id="+n;fetch(t).then(n=>n.json()).then(n=>{e(null,n)}).catch(n=>{e(n,null)})}static fetchRestaurantById(n,e){i.fetchRestaurants((t,r)=>{if(t)e(t,null);else{const t=r.find(e=>e.id==n);t?e(null,t):e("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(n,e){i.fetchRestaurants((t,r)=>{if(t)e(t,null);else{const t=r.filter(e=>e.cuisine_type==n);e(null,t)}})}static fetchRestaurantByNeighborhood(n,e){i.fetchRestaurants((t,r)=>{if(t)e(t,null);else{const t=r.filter(e=>e.neighborhood==n);e(null,t)}})}static fetchRestaurantByCuisineAndNeighborhood(n,e,t){i.fetchRestaurants((r,o)=>{if(r)t(r,null);else{let r=o;"all"!=n&&(r=r.filter(e=>e.cuisine_type==n)),"all"!=e&&(r=r.filter(n=>n.neighborhood==e)),t(null,r)}})}static fetchNeighborhoods(n){i.fetchRestaurants((e,t)=>{if(e)n(e,null);else{const e=t.map((n,e)=>t[e].neighborhood),r=e.filter((n,t)=>e.indexOf(n)==t);n(null,r)}})}static fetchCuisines(n){i.fetchRestaurants((e,t)=>{if(e)n(e,null);else{const e=t.map((n,e)=>t[e].cuisine_type),r=e.filter((n,t)=>e.indexOf(n)==t);n(null,r)}})}static urlForRestaurant(n){return`./restaurant.html?id=${n.id}`}static imageUrlForRestaurant(n){return n.photograph?`/img/${n.photograph}.jpg`:`/img/${n.id}.jpg`}static mapMarkerForRestaurant(n,e){const t=new L.marker([n.latlng.lat,n.latlng.lng],{title:n.name,alt:n.name,url:i.urlForRestaurant(n)});return t.addTo(newMap),t}static updateCachedRestaurantReview(n){return console.log("updating cache for new review",n),o.then(e=>{const t=e.transaction("reviews","readwrite"),r=t.objectStore("reviews");return console.log("putting review in store"),r.put(n),console.log("successfully put review in store"),t.done})}static saveNewReview(n){const e=i.DATABASE_REVIEWS_URL;return i.updateCachedRestaurantReview(n),i.addPendingRequestToQue(e,"POST",n).then(n=>n)}static addPendingRequestToQue(n,e,t){return new Promise((r,a)=>{o.then(r=>{r.transaction("pending","readwrite").objectStore("pending").put({data:{url:n,method:e,formData:t}})}).catch(n=>{console.log(n)}).then(i.nextPending((n,e)=>(console.log(e),r(e))))})}static nextPending(n){i.attemptCommitPending(i.nextPending).then(e=>{console.log(e),n(null,e)})}static attemptCommitPending(n){let e,t,r;return new Promise((i,a)=>{o.then(o=>{if(!o.objectStoreNames.length)return console.log("DB not available"),void o.close();o.transaction("pending","readwrite").objectStore("pending").openCursor().then(a=>{if(!a)return;a.value;if(e=a.value.data.url,t=a.value.data.method,r=a.value.data.formData,!e||!t||"POST"===t&&!r)return void a.delete().then(n());const s={body:JSON.stringify(r),method:t};fetch(e,s).then(n=>n.ok||n.redirected?n.json():(console.log("this is the response and we are offline"),void console.log(n))).then(e=>{o.transaction("pending","readwrite").objectStore("pending").openCursor().then(t=>{t.delete().then(()=>(n(),console.log(e),i(e)))}),console.log("deleted item from pending store")}).catch(n=>{console.log(n)})})})})}static syncRestaurant(n){try{let e=`http://localhost:1337/restaurants/${n.id}/?is_favorite=${n.is_favorite}`;return fetch(e,{method:"PUT"}).then(function(n){return n.json()})}catch(e){console.log("error updating restaurant backend data...",e,n)}}static updateRestaurantInDB(n){return o.then(function(e){let t=e.transaction("restaurants","readwrite");return t.objectStore("restaurants").put(n),t.complete}).then(function(){return Promise.resolve(n)})}static toggleFavBtn(n){return o.then(e=>{return e.transaction("restaurants").objectStore("restaurants").get(n)}).then(n=>{console.log(n);const e=Object.assign({},n);return e.is_favorite="true"===n.is_favorite||!0===n.is_favorite?"false":"true",i.syncRestaurant(e),i.updateRestaurantInDB(e)}).then(n=>{const e=document.getElementById(`fav-btn-${n.id}`);"true"===n.is_favorite||!0===n.is_favorite?(e.innerHTML="Favorited!",e.style.background="hotpink"):(e.innerHTML="Add to favorite",e.style.background="grey")})}}},function(n,e,t){"use strict";const r=(n,e)=>e.some(e=>n instanceof e);let o,i;const a=new WeakMap,s=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap;let u={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return s.get(n);if("objectStoreNames"===e)return n.objectStoreNames||c.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return h(n[e])},has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function f(n){return n===IDBDatabase.prototype.transaction&&"objectStoreNames"in IDBTransaction.prototype?function(e,...t){const r=n.call(m(this),e,...t);return c.set(r,e.sort?e.sort():[e]),h(r)}:(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(m(this),e),h(a.get(this))}:function(...e){return h(n.apply(m(this),e))}}function p(n){return"function"==typeof n?f(n):(n instanceof IDBTransaction&&function(n){if(s.has(n))return;const e=new Promise((e,t)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",i),n.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{t(n.error),r()};n.addEventListener("complete",o),n.addEventListener("error",i),n.addEventListener("abort",i)});s.set(n,e)}(n),r(n,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,u):n)}function h(n){if(n instanceof IDBRequest)return function(n){const e=new Promise((e,t)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",i)},o=()=>{e(h(n.result)),r()},i=()=>{t(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&a.set(e,n)}),d.set(e,n),e}(n);if(l.has(n))return l.get(n);const e=p(n);return e!==n&&(l.set(n,e),d.set(e,n)),e}const m=n=>d.get(n);function g(n,e,{blocked:t,upgrade:r,blocking:o}={}){const i=indexedDB.open(n,e),a=h(i);return r&&i.addEventListener("upgradeneeded",n=>{r(h(i.result),n.oldVersion,n.newVersion,h(i.transaction))}),t&&i.addEventListener("blocked",()=>t()),o&&a.then(n=>n.addEventListener("versionchange",o)),a}t.d(e,"a",function(){return g});const b=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],x=new Map;function w(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(x.get(e))return x.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t;if(!(t in(r?IDBIndex:IDBObjectStore).prototype))return;let o;return b.includes(t)&&(o=function(n,...e){let o=this.transaction(n).store;return r&&(o=o.index(e.shift())),o[t](...e)}),v.includes(t)&&(o=function(n,...e){const r=this.transaction(n,"readwrite");return r.store[t](...e),r.done}),o&&x.set(e,o),o}u=(n=>({get:(e,t,r)=>w(e,t)||n.get(e,t,r),has:(e,t)=>!!w(e,t)||n.has(e,t)}))(u)},function(n,e,t){var r=t(3);"string"==typeof r&&(r=[[n.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t(5)(r,o);r.locals&&(n.exports=r.locals)},function(n,e,t){(n.exports=t(4)(!1)).push([n.i,'@charset "utf-8";\n/* CSS Document */\n* {\n  box-sizing: border-box;\n  margin:0;\n  padding:0;\n}\n\n/* Define base font-size here; most elements will inherit this. */\nhtml{\n    font-size:1em;      /* Assuming 16px... */\n    line-height:1.5;\n    font-family: Arial, Helvetica, sans-serif;\n    color: #333;\n}\n\nbody,td,th,p{\n\tfont-family: Arial, Helvetica, sans-serif;\n\tfont-size: 1em;\n\tcolor: #333;\n\tline-height: 1.5;\n}\nbody {\n  max-width: 1100px;\n\tbackground-color: #fdfdfd;\n\tmargin: 0 auto;\n\tposition:relative;\n}\n\nmain, section {\n  width: 100%;\n}\nul, li {\n\tfont-family: Arial, Helvetica, sans-serif;\n\tfont-size: 10pt;\n\tcolor: #333;\n}\na {\n\tcolor: orange;\n\ttext-decoration: none;\n}\na:hover, a:focus {\n\tcolor: #3397db;\n\ttext-decoration: none;\n}\na img{\n\tborder: none 0px #fff;\n}\nh1, h2, h3, h4, h5, h6 {\n  font-family: Arial, Helvetica, sans-serif;\n  margin: 0 0 20px;\n}\narticle, aside, canvas, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\n.maincontent {\n  background-color: #f3f3f3;\n  min-height: 100%;\n}\n#footer {\n  background-color: #444;\n  color: #aaa;\n  font-size: 8pt;\n  letter-spacing: 1px;\n  padding: 25px;\n  text-align: center;\n  text-transform: uppercase;\n}\n\n.navigation h1 a:hover, .navigation h1 a:focus, a:focus, a:hover, button:hover,\nbutton:focus {\n  color:rgba(85,172,238 ,1);\n  text-decoration: underline;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14),\n              0 3px 1px -2px rgba(0, 0, 0, .2),\n              0 1px 5px 0 rgba(0, 0, 0, .12);\n}\n#restaurants-list li button:hover, #restaurants-list li .button:focus,\n.filter-options select:hover, .filter-options select:focus, #submit-form-btn:hover, #submit-form-btn:focus {\n  background-color:rgba(85,172,238 ,1);\n  color: #fff;\n  text-decoration: underline;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14),\n              0 3px 1px -2px rgba(0, 0, 0, .2),\n              0 1px 5px 0 rgba(0, 0, 0, .12);\n}\n\n/* ====================== Navigation ====================== */\nheader {\n    width: 100%;\n    background: #333;\n}\nul {\n  padding: 0;\n  list-style: none;\n}\n.navigation {\n  display:flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 10px;\n  color: rgba(117,117,117 ,1);\n}\n.navigation h1 {\n text-align: center;\n font-size: 1em;\n margin-bottom: 0;\n}\n\n.navigation li {\n  height: 100%;\n}\n\n.navigation .navigation__title {\n flex-grow: 1;\n}\n.navigation img {\n  width: 48px;\n  height: 48px;\n  background-color: white;\n}\n.navigation h1 a {\n  color: #fff;\n  font-size: 48px;\n  font-weight: 200;\n  letter-spacing: 10px;\n  margin: 10px auto;\n  font-family: \'Pacifico\', cursive;\n}\n#breadcrumb {\n    padding: 10px;\n    list-style: none;\n    background-color: #eee;\n    font-size: 17px;\n    margin: 0;\n    width: 100%;\n}\n\n/* Display list items side by side */\n#breadcrumb li {\n    display: inline;\n}\n\n/* Add a slash symbol (/) before/behind each list item */\n#breadcrumb li+li:before {\n    padding: 8px;\n    color: black;\n    content: "/\\00a0";\n}\n\n/* Add a color to all links inside the list */\n#breadcrumb li a {\n    color: #0275d8;\n    text-decoration: none;\n}\n\n/* Add a color on mouse-over */\n#breadcrumb li a:hover {\n    color: #01447e;\n    text-decoration: underline;\n}\n/* ====================== Map ====================== */\n#map {\n  height: 400px;\n  width: 100%;\n  background-color: #ccc;\n}\n/* ====================== Restaurant Filtering ====================== */\n.filter-options {\n  width: 100%;\n  background-color: #333;\n  align-items: center;\n}\n.filter-options h2 {\n  color: white;\n  font-size: 1rem;\n  font-weight: normal;\n  line-height: 1;\n  margin: 0 10px;\n  padding-top: 10px;\n}\n.filter-options select {\n  background-color: white;\n  border: 1px solid #fff;\n  font-family: Arial,sans-serif;\n  font-size: 11pt;\n  height: 35px;\n  letter-spacing: 0;\n  margin: 10px;\n  padding: 10px;\n  width: 200px;\n}\n.filter-label {\n  display: none;\n}\n\n.filter-section {\n  width: 100%;\n}\n\n/* ====================== Restaurant Listing ====================== */\n\n/*========\n===Flexbox on list and content\n========*/\n\n#restaurants-list {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  background-color: #f3f3f3;\n  list-style: outside none none;\n  margin: 0;\n  padding: 30px 15px 60px;\n  text-align: center;\n}\n#restaurants-list li {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  flex-grow: 1;\n  background-color: #fff;\n  border: 2px solid #ccc;\n  font-family: Arial,sans-serif;\n  margin: 15px;\n  min-height: 380px;\n  padding: 0 30px 25px;\n  text-align: left;\n  width: 100%;\n}\n#restaurants-list .restaurant-img {\n  background-color: #ccc;\n  display: block;\n  margin: 0;\n  max-width: 100%;\n  max-height: 300px;\n  min-width: 100%;\n}\n#restaurants-list li h1 {\n  color: #f18200;\n  font-family: Arial,sans-serif;\n  font-size: 14pt;\n  font-weight: 200;\n  letter-spacing: 0;\n  line-height: 1.3;\n  margin: 20px 0 10px;\n  text-transform: uppercase;\n\n}\n#restaurants-list p {\n  margin: 0;\n  font-size: 11pt;\n}\n#restaurants-list li button {\n  background-color: orange;\n  border-bottom: 3px solid #eee;\n  color: #fff;\n  display: inline-block;\n  font-size: 10pt;\n  margin: 15px 0 0;\n  padding: 8px 30px 10px;\n  text-align: center;\n  text-decoration: none;\n  text-transform: uppercase;\n}\n\n\n/* ====================== Restaurant Details ====================== */\n.inside header {\n  /*position: fixed;*/\n  /*top: 0;*/\n  width: 100%;\n  /*z-index: 1000;*/\n}\n.inside #map-container {\n  /*background: blue none repeat scroll 0 0;*/\n  height: 200px;\n  padding-bottom: 10px;\n}\n.inside #map {\n  background-color: #ccc;\n  height: 100%;\n  width: 100%;\n}\n.inside #footer {\n/*  bottom: 0;\n  position: absolute;*/\n  width: 100%;\n}\n#restaurant-name {\n  color: #f18200;\n  font-family: Arial,sans-serif;\n  font-size: 24pt;\n  font-weight: 200;\n  letter-spacing: 0;\n  margin: 10px auto;\n  text-transform: uppercase;\n  line-height: 1.1;\n}\n#restaurant-img {\n\twidth: 100%;\n  max-height: 80vh;\n}\n#restaurant-address {\n  font-size: 1.3em;\n  margin: 10px 0px;\n  width: 50%;\n}\n#restaurant-cuisine {\n  background-color: #333;\n  color: #ddd;\n  font-size: 1.2em;\n  font-weight: 300;\n  letter-spacing: 10px;\n  margin: 0 0 20px;\n  padding: 2px 0;\n  text-align: center;\n  text-transform: uppercase;\n\twidth: 100%;\n}\n#restaurant-container, #reviews-container, #reviews-form-container{\n  border-bottom: 1px solid #d9d9d9;\n  border-top: 1px solid #fff;\n  padding: 20px;\n  width: 100%;\n  display:flex;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n#reviews-container, #reviews-form-container {\n  padding: 30px 40px 40px;\n}\n#reviews-container h2, #reviews-form-container h2 {\n  color: #f58500;\n  font-size: 24pt;\n  font-weight: 300;\n  letter-spacing: -1px;\n  padding-bottom: 1pt;\n  margin: 0 auto;\n}\n#reviews-list {\n  margin: 0;\n  padding: 0;\n}\n#reviews-list li {\n  background-color: #fff;\n  border: 2px solid #f3f3f3;\n  display: block;\n  list-style-type: none;\n  margin: 0 0 30px;\n  overflow: hidden;\n  padding: 10px 20px 20px;\n  /*position: relative;*/\n  width: 100%;\n}\n#reviews-list li p {\n  margin: 0 0 10px;\n}\n#restaurant-hours {\n  width: 50%;\n}\n#restaurant-hours td {\n  color: #666;\n  font-size: 1em;\n}\n\n#create-edit-review-form {\n  width: 100%;\n}\n#create-edit-review-form label {\n  display: block;\n  margin: 0 auto;\n  text-align: center;\n  font-size: 1rem;\n}\n\n#create-edit-review-form input, #create-edit-review-form textarea {\n  display: block;\n  margin: 0 auto;\n  border: 1px solid gray;\n  padding: 5px;\n  width: 50%;\n}\n\n.submit-form-button {\n    display:block;\n    color: white;\n    background: orange;\n    padding: 10px;\n    width: 20%;\n    margin: 10px;\n    text-align: center;\n}\n\n/*//////////\n// Media Queries\n//////////*/\n\n@media screen and (min-width: 1000px) {\n  #restaurants-list li {\n    max-width: 30%;\n  }\n}\n@media screen and (max-width: 999px) and (min-width: 671px) {\n  #restaurants-list li {\n    min-width: 290px;\n    width: 45%;\n    max-width: 45%;\n  }\n}\n\n@media screen and (max-width: 670px) {\n  header {\n    /*min-height: 50px;*/\n  }\n  #restaurants-list li {\n    max-width: 80%;\n    margin: 8px auto;\n  }\n  .navigation h1 a{\n    font-size: 2.6em;\n  }\n  .navigation img {\n    width: 30px;\n    height: 30px;\n  }\n}\n\n@media screen and (max-width: 540px) {\n\n  .navigation h1 a{\n    font-size: 1.7em;\n    display: inline-block;\n  }\n  .navigation img {\n    display: none;\n  }\n  .filter-options select {\n    width: 50%);\n  }\n  #restaurant-container h1, #reviews-container h2 {\n    font-size: 1.5em;\n  }\n  #restaurant-img {\n    width: 100%;\n    height: 400px;\n  }\n  #restaurant-address {\n    width: 100%;\n  }\n  #restaurant-hours {\n    width: 100%;\n  }\n  #restaurant-hours td {\n    font-size: 1em;\n  }\n  #restaurant-cuisine {\n    font-size: 1em;\n  }\n}\n@media screen and (max-width: 450px) {\n  .filter-options select {\n    width: calc(100% - 24px);\n    margin: 10px;\n  }\n  #reviews-container {\n    padding: 0;\n  }\n}\n',""])},function(n,e,t){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t=function(n,e){var t=n[1]||"",r=n[3];if(!r)return t;if(e&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(n){return"/*# sourceURL="+r.sourceRoot+n+" */"});return[t].concat(i).concat([o]).join("\n")}var a;return[t].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},e.i=function(n,t){"string"==typeof n&&(n=[[null,n,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<n.length;o++){var a=n[o];null!=a[0]&&r[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),e.push(a))}},e}},function(n,e,t){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(n){var e={};return function(n,t){if("function"==typeof n)return n();if(void 0===e[n]){var r=function(n,e){return e?e.querySelector(n):document.querySelector(n)}.call(this,n,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}e[n]=r}return e[n]}}(),c=null,l=0,d=[],u=t(6);function f(n,e){for(var t=0;t<n.length;t++){var r=n[t],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(v(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function p(n,e){for(var t=[],r={},o=0;o<n.length;o++){var i=n[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):t.push(r[a]={id:a,parts:[s]})}return t}function h(n,e){var t=s(n.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===n.insertAt)r?r.nextSibling?t.insertBefore(e,r.nextSibling):t.appendChild(e):t.insertBefore(e,t.firstChild),d.push(e);else if("bottom"===n.insertAt)t.appendChild(e);else{if("object"!=typeof n.insertAt||!n.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(n.insertAt.before,t);t.insertBefore(e,o)}}function m(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n);var e=d.indexOf(n);e>=0&&d.splice(e,1)}function g(n){var e=document.createElement("style");if(void 0===n.attrs.type&&(n.attrs.type="text/css"),void 0===n.attrs.nonce){var r=function(){0;return t.nc}();r&&(n.attrs.nonce=r)}return b(e,n.attrs),h(n,e),e}function b(n,e){Object.keys(e).forEach(function(t){n.setAttribute(t,e[t])})}function v(n,e){var t,r,o,i;if(e.transform&&n.css){if(!(i="function"==typeof e.transform?e.transform(n.css):e.transform.default(n.css)))return function(){};n.css=i}if(e.singleton){var a=l++;t=c||(c=g(e)),r=y.bind(null,t,a,!1),o=y.bind(null,t,a,!0)}else n.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(n){var e=document.createElement("link");return void 0===n.attrs.type&&(n.attrs.type="text/css"),n.attrs.rel="stylesheet",b(e,n.attrs),h(n,e),e}(e),r=function(n,e,t){var r=t.css,o=t.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=u(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=n.href;n.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,t,e),o=function(){m(t),t.href&&URL.revokeObjectURL(t.href)}):(t=g(e),r=function(n,e){var t=e.css,r=e.media;r&&n.setAttribute("media",r);if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}.bind(null,t),o=function(){m(t)});return r(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;r(n=e)}else o()}}n.exports=function(n,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var t=p(n,e);return f(t,e),function(n){for(var r=[],o=0;o<t.length;o++){var a=t[o];(s=i[a.id]).refs--,r.push(s)}n&&f(p(n,e),e);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var x,w=(x=[],function(n,e){return x[n]=e,x.filter(Boolean).join("\n")});function y(n,e,t,r){var o=t?"":r.css;if(n.styleSheet)n.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),a=n.childNodes;a[e]&&n.removeChild(a[e]),a.length?n.insertBefore(i,a[e]):n.appendChild(i)}}},function(n,e){n.exports=function(n){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!n||"string"!=typeof n)return n;var t=e.protocol+"//"+e.host,r=t+e.pathname.replace(/\/[^\/]*$/,"/");return n.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(n,e){var o,i=e.trim().replace(/^"(.*)"$/,function(n,e){return e}).replace(/^'(.*)'$/,function(n,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?n:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?t+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(n,e,t){"use strict";"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/serviceworker.bundle.js").then(n=>{console.log("SW registered: ",n),console.log("HELLO FROM REGISTRATION JS")}).catch(n=>{console.log("SW registration failed: ",n)})})},,,function(n,e,t){n.exports=t(11)},function(n,e,t){"use strict";t.r(e);t(2),t(7);var r=t(0);let o;var i;document.addEventListener("DOMContentLoaded",n=>{a(),(o=document.getElementById("submit-form-btn")).addEventListener("click",h)});const a=()=>{s((n,e)=>{n?console.error(n):(i=L.map("map",{center:[e.latlng.lat,e.latlng.lng],zoom:16,scrollWheelZoom:!1}),self.newMap=i,L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1Ijoid2VudGluIiwiYSI6ImNqaXJ0N25iZjFwdjYza3A4MGt1aHU2bjEifQ.DnNFUoN5uzw01l_XK_c7nQ",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(i),f(),r.a.mapMarkerForRestaurant(self.restaurant,self.newMap))}),r.a.nextPending()},s=n=>{if(self.restaurant)return n(null,self.restaurant),void console.log("self restaurant already fetched");const e=p("id");e?r.a.fetchRestaurantById(e,(e,t)=>{self.restaurant=t,t?(c(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))},c=(n=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=n.name,document.getElementById("restaurant-address").innerHTML=` ${n.name} <br> ${n.address}`;const e=document.getElementById("restaurant-img");e.className="restaurant-img",e.src=r.a.imageUrlForRestaurant(n),document.getElementById("restaurant-cuisine").innerHTML=n.cuisine_type,n.operating_hours&&l(),r.a.fetchReviews(n.id,(n,e)=>{d(e)})},l=(n=self.restaurant.operating_hours)=>{const e=document.getElementById("restaurant-hours");for(let t in n){const r=document.createElement("tr"),o=document.createElement("td");o.innerHTML=t,r.appendChild(o);const i=document.createElement("td");i.innerHTML=n[t],r.appendChild(i),e.appendChild(r)}},d=(n=self.restaurant.reviews)=>{const e=document.getElementById("reviews-container"),t=document.createElement("h2");if(t.innerHTML="Reviews",e.appendChild(t),!n){const n=document.createElement("p");return n.innerHTML="No reviews yet!",void e.appendChild(n)}const r=document.getElementById("reviews-list");n.forEach(n=>{r.appendChild(u(n))}),e.appendChild(r)},u=n=>{const e=document.createElement("li");e.setAttribute("id",`review-li-${n.id}`);const t=document.createElement("p");t.innerHTML=n.name,e.appendChild(t);const r=document.createElement("p");r.innerHTML="<strong>Created:</strong> "+new Date(n.createdAt).toDateString(),e.appendChild(r);const o=document.createElement("p");o.innerHTML=`Rating: ${n.rating}`,e.appendChild(o);const i=document.createElement("p");return i.innerHTML=n.comments,e.appendChild(i),e},f=(n=self.restaurant)=>{const e=document.getElementById("breadcrumb"),t=document.createElement("li");t.innerHTML=n.name,e.appendChild(t)},p=(n,e)=>{e||(e=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");const t=new RegExp(`[?&]${n}(=([^&#]*)|&|#|$)`).exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},h=()=>{console.log("submit review function");let n=m();/[a-zA-Z]{2,}$/gi.test(n.name)?/[1-5]{1}$/gi.test(n.rating)?n.comments.length<3?alert("comments input must be minimum of 3 characters"):(n.restaurant_id=self.restaurant.id,r.a.saveNewReview(n).then(n=>{console.log(n);alert("Created Review");let e=u(n);document.getElementById("reviews-list").appendChild(e);var t=document.getElementById(`review-li-${n.id}`);t.scrollIntoView&&t.scrollIntoView.constructor===Function&&t.scrollIntoView(!0)})):alert("rating input must be a number, 1-5"):alert("name input must be letters only, minimum of 2 characters")},m=()=>({name:document.getElementById("name").value.trim(),rating:document.getElementById("rating").value.trim(),comments:document.getElementById("review-field").value.trim()})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwL3NyYy9kYmhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2VzbS9jaHVuay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL3N0eWxlcy5jc3M/OGRjNSIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL3N0eWxlcy5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL3JlZ2lzdHJhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL3Jlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJEQkhlbHBlciIsImlkYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiZGJQcm9taXNlIiwib3BlbkRCIiwidXBncmFkZSIsImRiIiwib2xkVmVyc2lvbiIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsImNyZWF0ZUluZGV4IiwiYXV0b0luY3JlbWVudCIsIkRBVEFCQVNFX1VSTCIsIkRBVEFCQVNFX1JFVklFV1NfVVJMIiwiW29iamVjdCBPYmplY3RdIiwiY2FsbGJhY2siLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJyZXN0YXVyYW50cyIsInJlc3RhdXJhbnRfaWQiLCJmZXRjaFVSTCIsInJldmlld3MiLCJjYXRjaCIsImVycm9yIiwiaWQiLCJmZXRjaFJlc3RhdXJhbnRzIiwicmVzdGF1cmFudCIsImZpbmQiLCJjdWlzaW5lIiwicmVzdWx0cyIsImZpbHRlciIsImN1aXNpbmVfdHlwZSIsIm5laWdoYm9yaG9vZCIsIm5laWdoYm9yaG9vZHMiLCJtYXAiLCJ2IiwidW5pcXVlTmVpZ2hib3Job29kcyIsImluZGV4T2YiLCJjdWlzaW5lcyIsInVuaXF1ZUN1aXNpbmVzIiwicGhvdG9ncmFwaCIsIm1hcmtlciIsIkwiLCJsYXRsbmciLCJsYXQiLCJsbmciLCJ0aXRsZSIsImFsdCIsInVybCIsInVybEZvclJlc3RhdXJhbnQiLCJhZGRUbyIsIm5ld01hcCIsImZvcm1EYXRhIiwiY29uc29sZSIsImxvZyIsInR4IiwidHJhbnNhY3Rpb24iLCJzdG9yZSIsIm9iamVjdFN0b3JlIiwicHV0IiwiZG9uZSIsInVwZGF0ZUNhY2hlZFJlc3RhdXJhbnRSZXZpZXciLCJhZGRQZW5kaW5nUmVxdWVzdFRvUXVlIiwibWV0aG9kIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJkYXRhIiwibmV4dFBlbmRpbmciLCJhdHRlbXB0Q29tbWl0UGVuZGluZyIsImoiLCJib2R5Iiwib2JqZWN0U3RvcmVOYW1lcyIsImxlbmd0aCIsImNsb3NlIiwib3BlbkN1cnNvciIsImN1cnNvciIsImRlbGV0ZSIsInByb3BlcnRpZXMiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJyZWRpcmVjdGVkIiwiaXNfZmF2b3JpdGUiLCJlIiwibmV3X3Jlc3RhdXJhbnQiLCJjb21wbGV0ZSIsImFzc2lnbiIsInN5bmNSZXN0YXVyYW50IiwidXBkYXRlUmVzdGF1cmFudEluREIiLCJmYXZCdG4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwiaW5zdGFuY2VPZkFueSIsImNvbnN0cnVjdG9ycyIsInNvbWUiLCJpZGJQcm94eWFibGVUeXBlcyIsImN1cnNvckFkdmFuY2VNZXRob2RzIiwiY3Vyc29yUmVxdWVzdE1hcCIsIldlYWtNYXAiLCJ0cmFuc2FjdGlvbkRvbmVNYXAiLCJ0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAiLCJ0cmFuc2Zvcm1DYWNoZSIsInJldmVyc2VUcmFuc2Zvcm1DYWNoZSIsImlkYlByb3h5VHJhcHMiLCJ0YXJnZXQiLCJwcm9wIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsInVuZGVmaW5lZCIsIndyYXAiLCJoYXMiLCJ3cmFwRnVuY3Rpb24iLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJzdG9yZU5hbWVzIiwiYXJncyIsInVud3JhcCIsInRoaXMiLCJzZXQiLCJzb3J0IiwiSURCQ3Vyc29yIiwiYWR2YW5jZSIsImNvbnRpbnVlIiwiY29udGludWVQcmltYXJ5S2V5IiwiaW5jbHVkZXMiLCJhcHBseSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJ1bmxpc3RlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uIiwiSURCT2JqZWN0U3RvcmUiLCJJREJJbmRleCIsIlByb3h5IiwiSURCUmVxdWVzdCIsInJlcXVlc3QiLCJwcm9taXNlIiwic3VjY2VzcyIsInJlc3VsdCIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsInZlcnNpb24iLCJibG9ja2VkIiwiYmxvY2tpbmciLCJpbmRleGVkREIiLCJvcGVuIiwib3BlblByb21pc2UiLCJldmVudCIsIm5ld1ZlcnNpb24iLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJNYXAiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInJlcGxhY2UiLCJ1c2VJbmRleCIsInN0b3JlTmFtZSIsImluZGV4Iiwic2hpZnQiLCJvbGRUcmFwcyIsImNvbnRlbnQiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsImxvY2FscyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJpdGVtIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjb25jYXQiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiZm4iLCJtZW1vIiwic3R5bGVzSW5Eb20iLCJpc09sZElFIiwid2luZG93IiwiYWxsIiwiYXRvYiIsImFyZ3VtZW50cyIsImdldEVsZW1lbnQiLCJwYXJlbnQiLCJzdHlsZVRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJiYXNlIiwicGFydCIsImNzcyIsIm1lZGlhIiwiaW5zZXJ0U3R5bGVFbGVtZW50IiwiRXJyb3IiLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsImluc2VydEF0IiwibmV4dFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJiZWZvcmUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXR0cnMiLCJ0eXBlIiwibm9uY2UiLCJuYyIsImdldE5vbmNlIiwiYWRkQXR0cnMiLCJlbCIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwib2JqIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVmYXVsdCIsInN0eWxlSW5kZXgiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiQmxvYiIsImxpbmsiLCJyZWwiLCJjcmVhdGVMaW5rRWxlbWVudCIsImF1dG9GaXhVcmxzIiwiY29udmVydFRvQWJzb2x1dGVVcmxzIiwiYmxvYiIsIm9sZFNyYyIsImhyZWYiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNyZWF0ZVRleHROb2RlIiwibmV3T2JqIiwiREVCVUciLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJyZXBsYWNlbWVudCIsIkJvb2xlYW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsImxvY2F0aW9uIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0IiwibmF2aWdhdG9yIiwic2VydmljZVdvcmtlciIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uIiwicmVnaXN0cmF0aW9uRXJyb3IiLCJfZGJoZWxwZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsInN1Ym1pdEJ0biIsImluaXRNYXAiLCJzdWJtaXRSZXZpZXciLCJmZXRjaFJlc3RhdXJhbnRGcm9tVVJMIiwiY2VudGVyIiwiem9vbSIsInNjcm9sbFdoZWVsWm9vbSIsInNlbGYiLCJ0aWxlTGF5ZXIiLCJtYXBib3hUb2tlbiIsIm1heFpvb20iLCJhdHRyaWJ1dGlvbiIsImZpbGxCcmVhZGNydW1iIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImdldFBhcmFtZXRlckJ5TmFtZSIsImZldGNoUmVzdGF1cmFudEJ5SWQiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhZGRyZXNzIiwiaW1hZ2UiLCJjbGFzc05hbWUiLCJzcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJvcGVyYXRpbmdfaG91cnMiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsImZldGNoUmV2aWV3cyIsImZpbGxSZXZpZXdzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwiaG91cnMiLCJyb3ciLCJkYXkiLCJ0aW1lIiwiY29udGFpbmVyIiwibm9SZXZpZXdzIiwidWwiLCJyZXZpZXciLCJjcmVhdGVSZXZpZXdIVE1MIiwibGkiLCJkYXRlIiwiRGF0ZSIsImNyZWF0ZWRBdCIsInRvRGF0ZVN0cmluZyIsInJhdGluZyIsImNvbW1lbnRzIiwiYnJlYWRjcnVtYiIsIlJlZ0V4cCIsImV4ZWMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJnZXRGb3JtVmFsdWVzIiwiYWxlcnQiLCJzYXZlTmV3UmV2aWV3IiwibmV3X3Jldmlld19ibG9jayIsImVsZW1lbnQiLCJzY3JvbGxJbnRvVmlldyIsImNvbnN0cnVjdG9yIiwiRnVuY3Rpb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFE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QU1MNkksRUFBZSxLQUNuQnZQLFFBQVFDLElBQUksMEJBRVosSUFBSUYsRUFBV3FTLElBQ1gsa0JBQWtCdEQsS0FBSy9PLEVBQVMvRSxNQUloQyxjQUFjOFQsS0FBSy9PLEVBQVMrUixRQUk3Qi9SLEVBQVNnUyxTQUFTM1EsT0FBUyxFQUM1QmlSLE1BQU0sbURBR1J0UyxFQUFTakMsY0FBZ0I4UixLQUFLdlIsV0FBV0YsR0FDekN6QixJQUFTNFYsY0FBY3ZTLEdBQVVyQyxLQUFNK0gsSUFDckN6RixRQUFRQyxJQUFJd0YsR0FFWjRNLE1BRGUsa0JBRWYsSUFBSUUsRUFBbUJmLEVBQWlCL0wsR0FDN0JuRCxTQUFTQyxlQUFlLGdCQUNoQ3dJLFlBQVl3SCxHQUNmLElBQUlDLEVBQVVsUSxTQUFTQyw0QkFBNEJrRCxFQUFPdEgsTUFDdkRxVSxFQUFRQyxnQkFBa0JELEVBQVFDLGVBQWVDLGNBQWdCQyxVQUNsRUgsRUFBUUMsZ0JBQWUsTUFqQnpCSixNQUFNLHNDQUpOQSxNQUFNLDZEQTBCSkQsRUFBZ0IsS0FDYixDQUNMcFgsS0FBTXNILFNBQVNDLGVBQWUsUUFBUTdHLE1BQU1rVCxPQUM1Q2tELE9BQVF4UCxTQUFTQyxlQUFlLFVBQVU3RyxNQUFNa1QsT0FDaERtRCxTQUFVelAsU0FBU0MsZUFBZSxnQkFBZ0I3RyxNQUFNa1QiLCJmaWxlIjoicmVzdGF1cmFudC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTApO1xuIiwiLyoqXG4gKiBDb21tb24gZGF0YWJhc2UgaGVscGVyIGZ1bmN0aW9ucy5cbiAqL1xuaW1wb3J0IHsgb3BlbkRCLCBkZWxldGVEQiwgd3JhcCwgdW53cmFwIH0gZnJvbSAnaWRiJztcblxuY29uc3QgZGJQcm9taXNlID0gb3BlbkRCKCdyci1kYicsIDMsIHtcbiAgdXBncmFkZShkYiwgb2xkVmVyc2lvbikge1xuICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBjb25zdCBzdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdyZXN0YXVyYW50cycsIHsga2V5UGF0aDogJ2lkJywgfSk7XG4gICAgICAgIHN0b3JlLmNyZWF0ZUluZGV4KCdpZCcsICdpZCcpO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBjb25zdCByZXZpZXdzU3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgncmV2aWV3cycsIHtcbiAgICAgICAgICBrZXlQYXRoOiAnaWQnLFxuICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldmlld3NTdG9yZS5jcmVhdGVJbmRleChcInJlc3RhdXJhbnRfaWRcIiwgXCJyZXN0YXVyYW50X2lkXCIpO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBjb25zdCBwZW5kaW5nU3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgncGVuZGluZycsIHtcbiAgICAgICAgICBrZXlQYXRoOiAnaWQnLFxuICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcbiAgICAgICAgfSlcbiAgICB9XG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEQkhlbHBlciB7XG5cbiAgLyoqXG4gICAqIERhdGFiYXNlIFVSTC5cbiAgICogQ2hhbmdlIHRoaXMgdG8gcmVzdGF1cmFudHMuanNvbiBmaWxlIGxvY2F0aW9uIG9uIHlvdXIgc2VydmVyLlxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XG4gICAgY29uc3QgcG9ydCA9IDEzMzcvLyBDaGFuZ2UgdGhpcyB0byB5b3VyIHNlcnZlciBwb3J0XG4gICAgcmV0dXJuIGBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0vcmVzdGF1cmFudHNgO1xuICB9XG5cbiAgc3RhdGljIGdldCBEQVRBQkFTRV9SRVZJRVdTX1VSTCgpIHtcbiAgICBjb25zdCBwb3J0ID0gMTMzNyAvLyBDaGFuZ2UgdGhpcyB0byB5b3VyIHNlcnZlciBwb3J0XG4gICAgcmV0dXJuIGBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0vcmV2aWV3c2A7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYWxsIHJlc3RhdXJhbnRzLlxuICAgKi9cblxuXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRzKGNhbGxiYWNrKSB7XG4gICAgZmV0Y2goREJIZWxwZXIuREFUQUJBU0VfVVJMKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbihyZXN0YXVyYW50cykge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50cyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBmZXRjaFJldmlld3MoIHJlc3RhdXJhbnRfaWQsIGNhbGxiYWNrKSB7XG4gICAgbGV0IGZldGNoVVJMID0gREJIZWxwZXIuREFUQUJBU0VfUkVWSUVXU19VUkwgKyBcIi8/cmVzdGF1cmFudF9pZD1cIiArIHJlc3RhdXJhbnRfaWQ7XG4gICAgZmV0Y2goZmV0Y2hVUkwpLnRoZW4oIHJlc3BvbnNlID0+IHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSkudGhlbihyZXZpZXdzID0+IHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmV2aWV3cyk7XG4gICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50UmV2aWV3c0J5SWQoaWQsIGNhbGxiYWNrKSB7XG4gIC8vICAgLy8gRmV0Y2ggYWxsIHJldmlld3MgZm9yIHRoZSBzcGVjaWZpYyByZXN0YXVyYW50XG4gIC8vICAgY29uc3QgZmV0Y2hVUkwgPSBEQkhlbHBlci5EQVRBQkFTRV9SRVZJRVdTX1VSTCArIFwiLz9yZXN0YXVyYW50X2lkPVwiICsgaWQ7XG4gIC8vICAgZmV0Y2goZmV0Y2hVUkwsIHttZXRob2Q6IFwiR0VUXCJ9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgLy8gICAgIGlmICghcmVzcG9uc2UuY2xvbmUoKS5vayAmJiAhcmVzcG9uc2UuY2xvbmUoKS5yZWRpcmVjdGVkKSB7XG4gIC8vICAgICAgIHRocm93IFwiTm8gcmV2aWV3cyBhdmFpbGFibGVcIjtcbiAgLy8gICAgIH1cbiAgLy8gICAgIHJlc3BvbnNlXG4gIC8vICAgICAgIC5qc29uKClcbiAgLy8gICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgLy8gICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAvLyAgICAgICB9KVxuICAvLyAgIH0pLmNhdGNoKGVycm9yID0+IGNhbGxiYWNrKGVycm9yLCBudWxsKSk7XG4gIC8vIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgcmVzdGF1cmFudCBieSBpdHMgSUQuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgY2FsbGJhY2spIHtcbiAgICAvLyBmZXRjaCBhbGwgcmVzdGF1cmFudHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVzdGF1cmFudCA9IHJlc3RhdXJhbnRzLmZpbmQociA9PiByLmlkID09IGlkKTtcbiAgICAgICAgaWYgKHJlc3RhdXJhbnQpIHsgLy8gR290IHRoZSByZXN0YXVyYW50XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XG4gICAgICAgIH0gZWxzZSB7IC8vIFJlc3RhdXJhbnQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgY2FsbGJhY2soJ1Jlc3RhdXJhbnQgZG9lcyBub3QgZXhpc3QnLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZShjdWlzaW5lLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50cyAgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIGN1aXNpbmUgdHlwZVxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgbmVpZ2hib3Job29kIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kKG5laWdoYm9yaG9vZCwgY2FsbGJhY2spIHtcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIG5laWdoYm9yaG9vZFxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIGFuZCBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCByZXN1bHRzID0gcmVzdGF1cmFudHNcbiAgICAgICAgaWYgKGN1aXNpbmUgIT0gJ2FsbCcpIHsgLy8gZmlsdGVyIGJ5IGN1aXNpbmVcbiAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmVpZ2hib3Job29kICE9ICdhbGwnKSB7IC8vIGZpbHRlciBieSBuZWlnaGJvcmhvb2RcbiAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cbiAgc3RhdGljIGZldGNoTmVpZ2hib3Job29kcyhjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEdldCBhbGwgbmVpZ2hib3Job29kcyBmcm9tIGFsbCByZXN0YXVyYW50c1xuICAgICAgICBjb25zdCBuZWlnaGJvcmhvb2RzID0gcmVzdGF1cmFudHMubWFwKCh2LCBpKSA9PiByZXN0YXVyYW50c1tpXS5uZWlnaGJvcmhvb2QpXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gbmVpZ2hib3Job29kc1xuICAgICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PSBpKVxuICAgICAgICBjYWxsYmFjayhudWxsLCB1bmlxdWVOZWlnaGJvcmhvb2RzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgY3Vpc2luZXMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hDdWlzaW5lcyhjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEdldCBhbGwgY3Vpc2luZXMgZnJvbSBhbGwgcmVzdGF1cmFudHNcbiAgICAgICAgY29uc3QgY3Vpc2luZXMgPSByZXN0YXVyYW50cy5tYXAoKHYsIGkpID0+IHJlc3RhdXJhbnRzW2ldLmN1aXNpbmVfdHlwZSlcbiAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBjdWlzaW5lc1xuICAgICAgICBjb25zdCB1bmlxdWVDdWlzaW5lcyA9IGN1aXNpbmVzLmZpbHRlcigodiwgaSkgPT4gY3Vpc2luZXMuaW5kZXhPZih2KSA9PSBpKVxuICAgICAgICBjYWxsYmFjayhudWxsLCB1bmlxdWVDdWlzaW5lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdGF1cmFudCBwYWdlIFVSTC5cbiAgICovXG4gIHN0YXRpYyB1cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcbiAgICByZXR1cm4gKGAuL3Jlc3RhdXJhbnQuaHRtbD9pZD0ke3Jlc3RhdXJhbnQuaWR9YCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdGF1cmFudCBpbWFnZSBVUkwuXG4gICAqL1xuICBzdGF0aWMgaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcbiAgICBpZighcmVzdGF1cmFudC5waG90b2dyYXBoKSB7XG4gICAgICByZXR1cm4gKGAvaW1nLyR7cmVzdGF1cmFudC5pZH0uanBnYClcbiAgICB9XG4gICAgcmV0dXJuIChgL2ltZy8ke3Jlc3RhdXJhbnQucGhvdG9ncmFwaH0uanBnYCk7XG4gIH1cblxuICAvKipcbiAgICogTWFwIG1hcmtlciBmb3IgYSByZXN0YXVyYW50LlxuICAgKi9cbiAgc3RhdGljIG1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgbWFwKSB7XG4gICAgLy8gaHR0cHM6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS0xLjMuMC5odG1sI21hcmtlclxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBMLm1hcmtlcihbcmVzdGF1cmFudC5sYXRsbmcubGF0LCByZXN0YXVyYW50LmxhdGxuZy5sbmddLFxuICAgICAge3RpdGxlOiByZXN0YXVyYW50Lm5hbWUsXG4gICAgICBhbHQ6IHJlc3RhdXJhbnQubmFtZSxcbiAgICAgIHVybDogREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KVxuICAgICAgfSlcbiAgICAgIG1hcmtlci5hZGRUbyhuZXdNYXApO1xuICAgIHJldHVybiBtYXJrZXI7XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FjaGVkUmVzdGF1cmFudFJldmlldyhmb3JtRGF0YSkge1xuICAgIGNvbnNvbGUubG9nKCd1cGRhdGluZyBjYWNoZSBmb3IgbmV3IHJldmlldycsIGZvcm1EYXRhKTtcbiAgICByZXR1cm4gZGJQcm9taXNlLnRoZW4oIGRiID0+IHtcbiAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oJ3Jldmlld3MnLCAncmVhZHdyaXRlJyk7XG4gICAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdyZXZpZXdzJyk7XG4gICAgICBjb25zb2xlLmxvZygncHV0dGluZyByZXZpZXcgaW4gc3RvcmUnKTtcbiAgICAgIHN0b3JlLnB1dChmb3JtRGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygnc3VjY2Vzc2Z1bGx5IHB1dCByZXZpZXcgaW4gc3RvcmUnKTtcbiAgICAgIHJldHVybiB0eC5kb25lO1xuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgc2F2ZU5ld1Jldmlldyhmb3JtRGF0YSkge1xuICAgIC8vIEJsb2NrIGFueSBtb3JlIGNsaWNrcyBvbiB0aGUgc3VibWl0IGJ1dHRvbiB1bnRpbCB0aGUgY2FsbGJhY2tcbiAgICAvLyBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC1mb3JtLWJ0blwiKTtcbiAgICAvLyBidG4ub25jbGljayA9IG51bGw7XG4gICAgY29uc3QgdXJsID0gREJIZWxwZXIuREFUQUJBU0VfUkVWSUVXU19VUkw7XG4gICAgY29uc3QgbWV0aG9kID0gXCJQT1NUXCI7XG4gICAgREJIZWxwZXIudXBkYXRlQ2FjaGVkUmVzdGF1cmFudFJldmlldyhmb3JtRGF0YSk7XG4gICAgcmV0dXJuIERCSGVscGVyLmFkZFBlbmRpbmdSZXF1ZXN0VG9RdWUodXJsLCBtZXRob2QsIGZvcm1EYXRhKS50aGVuKGpzb24gPT4ganNvbik7XG5cbiAgfVxuXG4gIHN0YXRpYyBhZGRQZW5kaW5nUmVxdWVzdFRvUXVlKHVybCwgbWV0aG9kLCBmb3JtRGF0YSkge1xuICAgIC8vb3BlbiBkYXRhYmFzZSBhbmQgYWRkIHJlcXVlc3QgZGV0YWlscyB0byB0aGUgcGVuZGluZyBzdG9yZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBkYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKCdwZW5kaW5nJywgJ3JlYWR3cml0ZScpO1xuICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgncGVuZGluZycpO1xuICAgICAgc3RvcmUucHV0KHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVybCxcbiAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgZm9ybURhdGFcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSkudGhlbihEQkhlbHBlci5uZXh0UGVuZGluZygoZXJyb3IsIGpzb24pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGpzb24pO1xuICAgICAgcmV0dXJuIHJlc29sdmUoanNvbik7XG4gICAgfSkpO1xuICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBuZXh0UGVuZGluZyhjYWxsYmFjaykge1xuICAgIERCSGVscGVyLmF0dGVtcHRDb21taXRQZW5kaW5nKERCSGVscGVyLm5leHRQZW5kaW5nKS50aGVuKGogPT4ge1xuICAgICAgY29uc29sZS5sb2coaik7XG4gICAgICBjYWxsYmFjayhudWxsLCBqKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhdHRlbXB0Q29tbWl0UGVuZGluZyhjYWxsYmFjaykge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgcGVuZGluZyBpdGVtcyB1bnRpbCB0aGVyZSBpcyBhIG5ldHdvcmsgZmFpbHVyZVxuICAgIGxldCB1cmw7XG4gICAgbGV0IG1ldGhvZDtcbiAgICBsZXQgYm9keTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4geyBkYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiREIgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbigncGVuZGluZycsICdyZWFkd3JpdGUnKTtcbiAgICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ3BlbmRpbmcnKTtcbiAgICAgIHN0b3JlLm9wZW5DdXJzb3IoKS50aGVuKCBjdXJzb3IgPT4ge1xuICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSBjdXJzb3IudmFsdWU7XG4gICAgICAgIHVybCA9IGN1cnNvci52YWx1ZS5kYXRhLnVybDtcbiAgICAgICAgbWV0aG9kID0gY3Vyc29yLnZhbHVlLmRhdGEubWV0aG9kO1xuICAgICAgICBib2R5ID0gY3Vyc29yLnZhbHVlLmRhdGEuZm9ybURhdGE7XG5cblxuICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgcGFyYW1ldGVyIHRoZW4gd2UncmUgb24gYSBiYWQgcmVjb3JkIHRoYXQgc2hvdWxkIGJlIHRvc3NlZFxuICAgICAgICAvLyBhbmQgdGhlbiBtb3ZlIG9uXG4gICAgICAgIGlmICgoIXVybCB8fCAhbWV0aG9kKSB8fCAobWV0aG9kID09PSBcIlBPU1RcIiAmJiAhYm9keSkpIHtcbiAgICAgICAgICBjdXJzb3JcbiAgICAgICAgICAgIC5kZWxldGUoKVxuICAgICAgICAgICAgLnRoZW4oY2FsbGJhY2soKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgICAgbWV0aG9kOiBtZXRob2RcbiAgICAgICAgfVxuICAgICAgICBmZXRjaCh1cmwsIHByb3BlcnRpZXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAvLyBJZiB3ZSBkb24ndCBnZXQgYSBnb29kIHJlc3BvbnNlIHRoZW4gYXNzdW1lIHdlJ3JlIG9mZmxpbmVcbiAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rICYmICFyZXNwb25zZS5yZWRpcmVjdGVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyB0aGUgcmVzcG9uc2UgYW5kIHdlIGFyZSBvZmZsaW5lJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0pLnRoZW4oIGogPT4ge1xuICAgICAgICAgIGNvbnN0IGRlbHR4ID0gZGIudHJhbnNhY3Rpb24oJ3BlbmRpbmcnLCAncmVhZHdyaXRlJyk7XG4gICAgICAgICAgY29uc3Qgc3RvcmUgPSBkZWx0eC5vYmplY3RTdG9yZSgncGVuZGluZycpO1xuICAgICAgICAgIHN0b3JlLm9wZW5DdXJzb3IoKVxuICAgICAgICAgICAgLnRoZW4oIGN1cnNvciA9PiB7XG4gICAgICAgICAgICAgIGN1cnNvci5kZWxldGUoKVxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShqKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZWQgaXRlbSBmcm9tIHBlbmRpbmcgc3RvcmUnKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBzeW5jUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XG4gICAgIHRyeSB7XG4gICAgICAgbGV0IHVybCA9IGBodHRwOi8vbG9jYWxob3N0OjEzMzcvcmVzdGF1cmFudHMvJHtyZXN0YXVyYW50LmlkfS8/aXNfZmF2b3JpdGU9JHtyZXN0YXVyYW50LmlzX2Zhdm9yaXRlfWA7XG4gICAgICAgbGV0IHBhcmFtcyA9IHttZXRob2Q6ICdQVVQnfTtcbiAgICAgICByZXR1cm4gZmV0Y2godXJsLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24ocil7IHJldHVybiByLmpzb24oKSB9KTtcbiAgICAgfVxuICAgICBjYXRjaChlKSB7XG4gICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHVwZGF0aW5nIHJlc3RhdXJhbnQgYmFja2VuZCBkYXRhLi4uJywgZSwgcmVzdGF1cmFudCk7XG4gICAgIH1cbiAgfVxuICAgICBzdGF0aWMgdXBkYXRlUmVzdGF1cmFudEluREIobmV3X3Jlc3RhdXJhbnQpIHtcbiAgICAgICByZXR1cm4gZGJQcm9taXNlLnRoZW4oZnVuY3Rpb24oZGIpe1xuICAgICAgICAgbGV0IHR4ID0gZGIudHJhbnNhY3Rpb24oJ3Jlc3RhdXJhbnRzJywgJ3JlYWR3cml0ZScpO1xuICAgICAgICAgbGV0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ3Jlc3RhdXJhbnRzJyk7XG4gICAgICAgICBzdG9yZS5wdXQobmV3X3Jlc3RhdXJhbnQpO1xuICAgICAgICAgcmV0dXJuIHR4LmNvbXBsZXRlXG4gICAgICAgfSkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3X3Jlc3RhdXJhbnQpO1xuICAgICAgIH0pO1xuICAgICB9XG5cbiAgc3RhdGljIHRvZ2dsZUZhdkJ0bihyZXN0YXVyYW50X2lkKSB7XG4gICAgcmV0dXJuIGRiUHJvbWlzZS50aGVuKCBkYiA9PiB7XG4gICAgICBsZXQgdHggPSBkYi50cmFuc2FjdGlvbigncmVzdGF1cmFudHMnKTtcbiAgICAgIGxldCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdyZXN0YXVyYW50cycpO1xuICAgICAgcmV0dXJuIHN0b3JlLmdldChyZXN0YXVyYW50X2lkKTtcbiAgICB9KS50aGVuKCByZXN0YXVyYW50ID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3RhdXJhbnQpO1xuICAgICAgY29uc3QgbmV3X3Jlc3RhdXJhbnQgPSBPYmplY3QuYXNzaWduKHt9LCByZXN0YXVyYW50KTtcbiAgICAgIG5ld19yZXN0YXVyYW50LmlzX2Zhdm9yaXRlID0gKHJlc3RhdXJhbnQuaXNfZmF2b3JpdGUgPT09ICd0cnVlJyB8fCByZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09PSB0cnVlKSA/XG4gICAgICAnZmFsc2UnIDogJ3RydWUnO1xuICAgICAgREJIZWxwZXIuc3luY1Jlc3RhdXJhbnQobmV3X3Jlc3RhdXJhbnQpO1xuICAgICAgcmV0dXJuIERCSGVscGVyLnVwZGF0ZVJlc3RhdXJhbnRJbkRCKG5ld19yZXN0YXVyYW50KTtcbiAgICB9KS50aGVuKCBuZXdfcmVzdGF1cmFudCA9PiB7XG4gICAgICBjb25zdCBmYXZCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgZmF2LWJ0bi0ke25ld19yZXN0YXVyYW50LmlkfWApO1xuICAgICAgaWYobmV3X3Jlc3RhdXJhbnQuaXNfZmF2b3JpdGUgPT09ICd0cnVlJyB8fCBuZXdfcmVzdGF1cmFudC5pc19mYXZvcml0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBmYXZCdG4uaW5uZXJIVE1MID0gJ0Zhdm9yaXRlZCEnO1xuICAgICAgICBmYXZCdG4uc3R5bGUuYmFja2dyb3VuZCA9ICdob3RwaW5rJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhdkJ0bi5pbm5lckhUTUwgPSAnQWRkIHRvIGZhdm9yaXRlJztcbiAgICAgICAgZmF2QnRuLnN0eWxlLmJhY2tncm91bmQgPSAnZ3JleSc7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG59XG5cbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKGMgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcclxubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xyXG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cclxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XHJcbiAgICByZXR1cm4gaWRiUHJveHlhYmxlVHlwZXMgfHxcclxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbSURCRGF0YWJhc2UsIElEQk9iamVjdFN0b3JlLCBJREJJbmRleCwgSURCQ3Vyc29yLCBJREJUcmFuc2FjdGlvbl0pO1xyXG59XHJcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxyXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcclxuICAgIHJldHVybiBjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fCAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXHJcbiAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxyXG4gICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXHJcbiAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXHJcbiAgICBdKTtcclxufVxyXG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcclxuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XHJcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgICAgICB1bmxpc3RlbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcclxuICAgIH0pO1xyXG4gICAgcHJvbWlzZS50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcclxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XHJcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcclxuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxyXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcclxuICAgIHJldHVybiBwcm9taXNlO1xyXG59XHJcbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xyXG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXHJcbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XHJcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yKTtcclxuICAgICAgICAgICAgdW5saXN0ZW4oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xyXG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xyXG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxyXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XHJcbn1cclxubGV0IGlkYlByb3h5VHJhcHMgPSB7XHJcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xyXG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxyXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcclxuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxyXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxyXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV0gP1xyXG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxyXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XHJcbiAgICB9LFxyXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xyXG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJiAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XHJcbiAgICB9LFxyXG59O1xyXG5mdW5jdGlvbiBhZGRUcmFwcyhjYWxsYmFjaykge1xyXG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xyXG59XHJcbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XHJcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxyXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxyXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXHJcbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXHJcbiAgICAgICAgJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xyXG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxyXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcclxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXHJcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXHJcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXHJcbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXHJcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXHJcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXHJcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cclxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xyXG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcclxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXHJcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcclxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xyXG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xyXG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XHJcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcclxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cclxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXHJcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xyXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxyXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cclxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xyXG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcclxuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxyXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXHJcbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xyXG59XHJcbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHdyYXAgYXMgYSwgYWRkVHJhcHMgYXMgYiwgaW5zdGFuY2VPZkFueSBhcyBjLCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgZCwgdW53cmFwIGFzIGUgfTtcbiIsImltcG9ydCB7IGEgYXMgd3JhcCwgYiBhcyBhZGRUcmFwcyB9IGZyb20gJy4vY2h1bmsuanMnO1xuZXhwb3J0IHsgZSBhcyB1bndyYXAsIGEgYXMgd3JhcCB9IGZyb20gJy4vY2h1bmsuanMnO1xuXG4vKipcclxuICogT3BlbiBhIGRhdGFiYXNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cclxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXHJcbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXHJcbiAqL1xyXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZyB9ID0ge30pIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcclxuICAgIGlmICh1cGdyYWRlKSB7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGJsb2NrZWQpXHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKCkgPT4gYmxvY2tlZCgpKTtcclxuICAgIGlmIChibG9ja2luZylcclxuICAgICAgICBvcGVuUHJvbWlzZS50aGVuKGRiID0+IGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCBibG9ja2luZykpO1xyXG4gICAgcmV0dXJuIG9wZW5Qcm9taXNlO1xyXG59XHJcbi8qKlxyXG4gKiBEZWxldGUgYSBkYXRhYmFzZS5cclxuICpcclxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxldGVEQihuYW1lLCB7IGJsb2NrZWQgfSA9IHt9KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xyXG4gICAgaWYgKGJsb2NrZWQpXHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKCkgPT4gYmxvY2tlZCgpKTtcclxuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcclxufVxuXG5jb25zdCByZWFkTWV0aG9kcyA9IFsnZ2V0JywgJ2dldEtleScsICdnZXRBbGwnLCAnZ2V0QWxsS2V5cycsICdjb3VudCddO1xyXG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XHJcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHtcclxuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXHJcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcclxuICAgICAgICB0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcclxuICAgICAgICByZXR1cm4gY2FjaGVkTWV0aG9kcy5nZXQocHJvcCk7XHJcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcclxuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XHJcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXHJcbiAgICBpZiAoISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG1ldGhvZDtcclxuICAgIGlmIChyZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpIHtcclxuICAgICAgICBtZXRob2QgPSBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSkuc3RvcmU7XHJcbiAgICAgICAgICAgIGlmICh1c2VJbmRleClcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5pbmRleChhcmdzLnNoaWZ0KCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3RhcmdldEZ1bmNOYW1lXSguLi5hcmdzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpIHtcclxuICAgICAgICBtZXRob2QgPSBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gdGhpcy50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgdHguc3RvcmVbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHguZG9uZTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKG1ldGhvZClcclxuICAgICAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xyXG4gICAgcmV0dXJuIG1ldGhvZDtcclxufVxyXG5hZGRUcmFwcyhvbGRUcmFwcyA9PiAoe1xyXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxyXG4gICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAhIWdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmhhcyh0YXJnZXQsIHByb3ApLFxyXG59KSk7XG5cbmV4cG9ydCB7IG9wZW5EQiwgZGVsZXRlREIgfTtcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlcy5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGVzLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGVzLmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiQGNoYXJzZXQgXFxcInV0Zi04XFxcIjtcXG4vKiBDU1MgRG9jdW1lbnQgKi9cXG4qIHtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBtYXJnaW46MDtcXG4gIHBhZGRpbmc6MDtcXG59XFxuXFxuLyogRGVmaW5lIGJhc2UgZm9udC1zaXplIGhlcmU7IG1vc3QgZWxlbWVudHMgd2lsbCBpbmhlcml0IHRoaXMuICovXFxuaHRtbHtcXG4gICAgZm9udC1zaXplOjFlbTsgICAgICAvKiBBc3N1bWluZyAxNnB4Li4uICovXFxuICAgIGxpbmUtaGVpZ2h0OjEuNTtcXG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxuICAgIGNvbG9yOiAjMzMzO1xcbn1cXG5cXG5ib2R5LHRkLHRoLHB7XFxuXFx0Zm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxuXFx0Zm9udC1zaXplOiAxZW07XFxuXFx0Y29sb3I6ICMzMzM7XFxuXFx0bGluZS1oZWlnaHQ6IDEuNTtcXG59XFxuYm9keSB7XFxuICBtYXgtd2lkdGg6IDExMDBweDtcXG5cXHRiYWNrZ3JvdW5kLWNvbG9yOiAjZmRmZGZkO1xcblxcdG1hcmdpbjogMCBhdXRvO1xcblxcdHBvc2l0aW9uOnJlbGF0aXZlO1xcbn1cXG5cXG5tYWluLCBzZWN0aW9uIHtcXG4gIHdpZHRoOiAxMDAlO1xcbn1cXG51bCwgbGkge1xcblxcdGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xcblxcdGZvbnQtc2l6ZTogMTBwdDtcXG5cXHRjb2xvcjogIzMzMztcXG59XFxuYSB7XFxuXFx0Y29sb3I6IG9yYW5nZTtcXG5cXHR0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxufVxcbmE6aG92ZXIsIGE6Zm9jdXMge1xcblxcdGNvbG9yOiAjMzM5N2RiO1xcblxcdHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG59XFxuYSBpbWd7XFxuXFx0Ym9yZGVyOiBub25lIDBweCAjZmZmO1xcbn1cXG5oMSwgaDIsIGgzLCBoNCwgaDUsIGg2IHtcXG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xcbiAgbWFyZ2luOiAwIDAgMjBweDtcXG59XFxuYXJ0aWNsZSwgYXNpZGUsIGNhbnZhcywgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcblxcdGRpc3BsYXk6IGJsb2NrO1xcbn1cXG4ubWFpbmNvbnRlbnQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YzZjNmMztcXG4gIG1pbi1oZWlnaHQ6IDEwMCU7XFxufVxcbiNmb290ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzQ0NDtcXG4gIGNvbG9yOiAjYWFhO1xcbiAgZm9udC1zaXplOiA4cHQ7XFxuICBsZXR0ZXItc3BhY2luZzogMXB4O1xcbiAgcGFkZGluZzogMjVweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XFxufVxcblxcbi5uYXZpZ2F0aW9uIGgxIGE6aG92ZXIsIC5uYXZpZ2F0aW9uIGgxIGE6Zm9jdXMsIGE6Zm9jdXMsIGE6aG92ZXIsIGJ1dHRvbjpob3ZlcixcXG5idXR0b246Zm9jdXMge1xcbiAgY29sb3I6cmdiYSg4NSwxNzIsMjM4ICwxKTtcXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcbiAgYm94LXNoYWRvdzogMCAycHggMnB4IDAgcmdiYSgwLCAwLCAwLCAuMTQpLFxcbiAgICAgICAgICAgICAgMCAzcHggMXB4IC0ycHggcmdiYSgwLCAwLCAwLCAuMiksXFxuICAgICAgICAgICAgICAwIDFweCA1cHggMCByZ2JhKDAsIDAsIDAsIC4xMik7XFxufVxcbiNyZXN0YXVyYW50cy1saXN0IGxpIGJ1dHRvbjpob3ZlciwgI3Jlc3RhdXJhbnRzLWxpc3QgbGkgLmJ1dHRvbjpmb2N1cyxcXG4uZmlsdGVyLW9wdGlvbnMgc2VsZWN0OmhvdmVyLCAuZmlsdGVyLW9wdGlvbnMgc2VsZWN0OmZvY3VzLCAjc3VibWl0LWZvcm0tYnRuOmhvdmVyLCAjc3VibWl0LWZvcm0tYnRuOmZvY3VzIHtcXG4gIGJhY2tncm91bmQtY29sb3I6cmdiYSg4NSwxNzIsMjM4ICwxKTtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxuICBib3gtc2hhZG93OiAwIDJweCAycHggMCByZ2JhKDAsIDAsIDAsIC4xNCksXFxuICAgICAgICAgICAgICAwIDNweCAxcHggLTJweCByZ2JhKDAsIDAsIDAsIC4yKSxcXG4gICAgICAgICAgICAgIDAgMXB4IDVweCAwIHJnYmEoMCwgMCwgMCwgLjEyKTtcXG59XFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PSBOYXZpZ2F0aW9uID09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5oZWFkZXIge1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgYmFja2dyb3VuZDogIzMzMztcXG59XFxudWwge1xcbiAgcGFkZGluZzogMDtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxufVxcbi5uYXZpZ2F0aW9uIHtcXG4gIGRpc3BsYXk6ZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIHBhZGRpbmc6IDAgMTBweDtcXG4gIGNvbG9yOiByZ2JhKDExNywxMTcsMTE3ICwxKTtcXG59XFxuLm5hdmlnYXRpb24gaDEge1xcbiB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuIGZvbnQtc2l6ZTogMWVtO1xcbiBtYXJnaW4tYm90dG9tOiAwO1xcbn1cXG5cXG4ubmF2aWdhdGlvbiBsaSB7XFxuICBoZWlnaHQ6IDEwMCU7XFxufVxcblxcbi5uYXZpZ2F0aW9uIC5uYXZpZ2F0aW9uX190aXRsZSB7XFxuIGZsZXgtZ3JvdzogMTtcXG59XFxuLm5hdmlnYXRpb24gaW1nIHtcXG4gIHdpZHRoOiA0OHB4O1xcbiAgaGVpZ2h0OiA0OHB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxufVxcbi5uYXZpZ2F0aW9uIGgxIGEge1xcbiAgY29sb3I6ICNmZmY7XFxuICBmb250LXNpemU6IDQ4cHg7XFxuICBmb250LXdlaWdodDogMjAwO1xcbiAgbGV0dGVyLXNwYWNpbmc6IDEwcHg7XFxuICBtYXJnaW46IDEwcHggYXV0bztcXG4gIGZvbnQtZmFtaWx5OiAnUGFjaWZpY28nLCBjdXJzaXZlO1xcbn1cXG4jYnJlYWRjcnVtYiB7XFxuICAgIHBhZGRpbmc6IDEwcHg7XFxuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XFxuICAgIGZvbnQtc2l6ZTogMTdweDtcXG4gICAgbWFyZ2luOiAwO1xcbiAgICB3aWR0aDogMTAwJTtcXG59XFxuXFxuLyogRGlzcGxheSBsaXN0IGl0ZW1zIHNpZGUgYnkgc2lkZSAqL1xcbiNicmVhZGNydW1iIGxpIHtcXG4gICAgZGlzcGxheTogaW5saW5lO1xcbn1cXG5cXG4vKiBBZGQgYSBzbGFzaCBzeW1ib2wgKC8pIGJlZm9yZS9iZWhpbmQgZWFjaCBsaXN0IGl0ZW0gKi9cXG4jYnJlYWRjcnVtYiBsaStsaTpiZWZvcmUge1xcbiAgICBwYWRkaW5nOiA4cHg7XFxuICAgIGNvbG9yOiBibGFjaztcXG4gICAgY29udGVudDogXFxcIi9cXFxcMDBhMFxcXCI7XFxufVxcblxcbi8qIEFkZCBhIGNvbG9yIHRvIGFsbCBsaW5rcyBpbnNpZGUgdGhlIGxpc3QgKi9cXG4jYnJlYWRjcnVtYiBsaSBhIHtcXG4gICAgY29sb3I6ICMwMjc1ZDg7XFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG59XFxuXFxuLyogQWRkIGEgY29sb3Igb24gbW91c2Utb3ZlciAqL1xcbiNicmVhZGNydW1iIGxpIGE6aG92ZXIge1xcbiAgICBjb2xvcjogIzAxNDQ3ZTtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxufVxcbi8qID09PT09PT09PT09PT09PT09PT09PT0gTWFwID09PT09PT09PT09PT09PT09PT09PT0gKi9cXG4jbWFwIHtcXG4gIGhlaWdodDogNDAwcHg7XFxuICB3aWR0aDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNjY2M7XFxufVxcbi8qID09PT09PT09PT09PT09PT09PT09PT0gUmVzdGF1cmFudCBGaWx0ZXJpbmcgPT09PT09PT09PT09PT09PT09PT09PSAqL1xcbi5maWx0ZXItb3B0aW9ucyB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbn1cXG4uZmlsdGVyLW9wdGlvbnMgaDIge1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgZm9udC1zaXplOiAxcmVtO1xcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcXG4gIGxpbmUtaGVpZ2h0OiAxO1xcbiAgbWFyZ2luOiAwIDEwcHg7XFxuICBwYWRkaW5nLXRvcDogMTBweDtcXG59XFxuLmZpbHRlci1vcHRpb25zIHNlbGVjdCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNmZmY7XFxuICBmb250LWZhbWlseTogQXJpYWwsc2Fucy1zZXJpZjtcXG4gIGZvbnQtc2l6ZTogMTFwdDtcXG4gIGhlaWdodDogMzVweDtcXG4gIGxldHRlci1zcGFjaW5nOiAwO1xcbiAgbWFyZ2luOiAxMHB4O1xcbiAgcGFkZGluZzogMTBweDtcXG4gIHdpZHRoOiAyMDBweDtcXG59XFxuLmZpbHRlci1sYWJlbCB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG5cXG4uZmlsdGVyLXNlY3Rpb24ge1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcblxcbi8qID09PT09PT09PT09PT09PT09PT09PT0gUmVzdGF1cmFudCBMaXN0aW5nID09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG4vKj09PT09PT09XFxuPT09RmxleGJveCBvbiBsaXN0IGFuZCBjb250ZW50XFxuPT09PT09PT0qL1xcblxcbiNyZXN0YXVyYW50cy1saXN0IHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxuICB3aWR0aDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmM2YzZjM7XFxuICBsaXN0LXN0eWxlOiBvdXRzaWRlIG5vbmUgbm9uZTtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDMwcHggMTVweCA2MHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG4jcmVzdGF1cmFudHMtbGlzdCBsaSB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG4gIGZsZXgtZ3JvdzogMTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XFxuICBib3JkZXI6IDJweCBzb2xpZCAjY2NjO1xcbiAgZm9udC1mYW1pbHk6IEFyaWFsLHNhbnMtc2VyaWY7XFxuICBtYXJnaW46IDE1cHg7XFxuICBtaW4taGVpZ2h0OiAzODBweDtcXG4gIHBhZGRpbmc6IDAgMzBweCAyNXB4O1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIHdpZHRoOiAxMDAlO1xcbn1cXG4jcmVzdGF1cmFudHMtbGlzdCAucmVzdGF1cmFudC1pbWcge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NjYztcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbWFyZ2luOiAwO1xcbiAgbWF4LXdpZHRoOiAxMDAlO1xcbiAgbWF4LWhlaWdodDogMzAwcHg7XFxuICBtaW4td2lkdGg6IDEwMCU7XFxufVxcbiNyZXN0YXVyYW50cy1saXN0IGxpIGgxIHtcXG4gIGNvbG9yOiAjZjE4MjAwO1xcbiAgZm9udC1mYW1pbHk6IEFyaWFsLHNhbnMtc2VyaWY7XFxuICBmb250LXNpemU6IDE0cHQ7XFxuICBmb250LXdlaWdodDogMjAwO1xcbiAgbGV0dGVyLXNwYWNpbmc6IDA7XFxuICBsaW5lLWhlaWdodDogMS4zO1xcbiAgbWFyZ2luOiAyMHB4IDAgMTBweDtcXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XFxuXFxufVxcbiNyZXN0YXVyYW50cy1saXN0IHAge1xcbiAgbWFyZ2luOiAwO1xcbiAgZm9udC1zaXplOiAxMXB0O1xcbn1cXG4jcmVzdGF1cmFudHMtbGlzdCBsaSBidXR0b24ge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogb3JhbmdlO1xcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkICNlZWU7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGZvbnQtc2l6ZTogMTBwdDtcXG4gIG1hcmdpbjogMTVweCAwIDA7XFxuICBwYWRkaW5nOiA4cHggMzBweCAxMHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG59XFxuXFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PSBSZXN0YXVyYW50IERldGFpbHMgPT09PT09PT09PT09PT09PT09PT09PSAqL1xcbi5pbnNpZGUgaGVhZGVyIHtcXG4gIC8qcG9zaXRpb246IGZpeGVkOyovXFxuICAvKnRvcDogMDsqL1xcbiAgd2lkdGg6IDEwMCU7XFxuICAvKnotaW5kZXg6IDEwMDA7Ki9cXG59XFxuLmluc2lkZSAjbWFwLWNvbnRhaW5lciB7XFxuICAvKmJhY2tncm91bmQ6IGJsdWUgbm9uZSByZXBlYXQgc2Nyb2xsIDAgMDsqL1xcbiAgaGVpZ2h0OiAyMDBweDtcXG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xcbn1cXG4uaW5zaWRlICNtYXAge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NjYztcXG4gIGhlaWdodDogMTAwJTtcXG4gIHdpZHRoOiAxMDAlO1xcbn1cXG4uaW5zaWRlICNmb290ZXIge1xcbi8qICBib3R0b206IDA7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7Ki9cXG4gIHdpZHRoOiAxMDAlO1xcbn1cXG4jcmVzdGF1cmFudC1uYW1lIHtcXG4gIGNvbG9yOiAjZjE4MjAwO1xcbiAgZm9udC1mYW1pbHk6IEFyaWFsLHNhbnMtc2VyaWY7XFxuICBmb250LXNpemU6IDI0cHQ7XFxuICBmb250LXdlaWdodDogMjAwO1xcbiAgbGV0dGVyLXNwYWNpbmc6IDA7XFxuICBtYXJnaW46IDEwcHggYXV0bztcXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XFxuICBsaW5lLWhlaWdodDogMS4xO1xcbn1cXG4jcmVzdGF1cmFudC1pbWcge1xcblxcdHdpZHRoOiAxMDAlO1xcbiAgbWF4LWhlaWdodDogODB2aDtcXG59XFxuI3Jlc3RhdXJhbnQtYWRkcmVzcyB7XFxuICBmb250LXNpemU6IDEuM2VtO1xcbiAgbWFyZ2luOiAxMHB4IDBweDtcXG4gIHdpZHRoOiA1MCU7XFxufVxcbiNyZXN0YXVyYW50LWN1aXNpbmUge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcXG4gIGNvbG9yOiAjZGRkO1xcbiAgZm9udC1zaXplOiAxLjJlbTtcXG4gIGZvbnQtd2VpZ2h0OiAzMDA7XFxuICBsZXR0ZXItc3BhY2luZzogMTBweDtcXG4gIG1hcmdpbjogMCAwIDIwcHg7XFxuICBwYWRkaW5nOiAycHggMDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XFxuXFx0d2lkdGg6IDEwMCU7XFxufVxcbiNyZXN0YXVyYW50LWNvbnRhaW5lciwgI3Jldmlld3MtY29udGFpbmVyLCAjcmV2aWV3cy1mb3JtLWNvbnRhaW5lcntcXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZDlkOWQ5O1xcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNmZmY7XFxuICBwYWRkaW5nOiAyMHB4O1xcbiAgd2lkdGg6IDEwMCU7XFxuICBkaXNwbGF5OmZsZXg7XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuI3Jldmlld3MtY29udGFpbmVyLCAjcmV2aWV3cy1mb3JtLWNvbnRhaW5lciB7XFxuICBwYWRkaW5nOiAzMHB4IDQwcHggNDBweDtcXG59XFxuI3Jldmlld3MtY29udGFpbmVyIGgyLCAjcmV2aWV3cy1mb3JtLWNvbnRhaW5lciBoMiB7XFxuICBjb2xvcjogI2Y1ODUwMDtcXG4gIGZvbnQtc2l6ZTogMjRwdDtcXG4gIGZvbnQtd2VpZ2h0OiAzMDA7XFxuICBsZXR0ZXItc3BhY2luZzogLTFweDtcXG4gIHBhZGRpbmctYm90dG9tOiAxcHQ7XFxuICBtYXJnaW46IDAgYXV0bztcXG59XFxuI3Jldmlld3MtbGlzdCB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbn1cXG4jcmV2aWV3cy1saXN0IGxpIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XFxuICBib3JkZXI6IDJweCBzb2xpZCAjZjNmM2YzO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XFxuICBtYXJnaW46IDAgMCAzMHB4O1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHBhZGRpbmc6IDEwcHggMjBweCAyMHB4O1xcbiAgLypwb3NpdGlvbjogcmVsYXRpdmU7Ki9cXG4gIHdpZHRoOiAxMDAlO1xcbn1cXG4jcmV2aWV3cy1saXN0IGxpIHAge1xcbiAgbWFyZ2luOiAwIDAgMTBweDtcXG59XFxuI3Jlc3RhdXJhbnQtaG91cnMge1xcbiAgd2lkdGg6IDUwJTtcXG59XFxuI3Jlc3RhdXJhbnQtaG91cnMgdGQge1xcbiAgY29sb3I6ICM2NjY7XFxuICBmb250LXNpemU6IDFlbTtcXG59XFxuXFxuI2NyZWF0ZS1lZGl0LXJldmlldy1mb3JtIHtcXG4gIHdpZHRoOiAxMDAlO1xcbn1cXG4jY3JlYXRlLWVkaXQtcmV2aWV3LWZvcm0gbGFiZWwge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBtYXJnaW46IDAgYXV0bztcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGZvbnQtc2l6ZTogMXJlbTtcXG59XFxuXFxuI2NyZWF0ZS1lZGl0LXJldmlldy1mb3JtIGlucHV0LCAjY3JlYXRlLWVkaXQtcmV2aWV3LWZvcm0gdGV4dGFyZWEge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBtYXJnaW46IDAgYXV0bztcXG4gIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XFxuICBwYWRkaW5nOiA1cHg7XFxuICB3aWR0aDogNTAlO1xcbn1cXG5cXG4uc3VibWl0LWZvcm0tYnV0dG9uIHtcXG4gICAgZGlzcGxheTpibG9jaztcXG4gICAgY29sb3I6IHdoaXRlO1xcbiAgICBiYWNrZ3JvdW5kOiBvcmFuZ2U7XFxuICAgIHBhZGRpbmc6IDEwcHg7XFxuICAgIHdpZHRoOiAyMCU7XFxuICAgIG1hcmdpbjogMTBweDtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4vKi8vLy8vLy8vLy9cXG4vLyBNZWRpYSBRdWVyaWVzXFxuLy8vLy8vLy8vLyovXFxuXFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTAwMHB4KSB7XFxuICAjcmVzdGF1cmFudHMtbGlzdCBsaSB7XFxuICAgIG1heC13aWR0aDogMzAlO1xcbiAgfVxcbn1cXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTlweCkgYW5kIChtaW4td2lkdGg6IDY3MXB4KSB7XFxuICAjcmVzdGF1cmFudHMtbGlzdCBsaSB7XFxuICAgIG1pbi13aWR0aDogMjkwcHg7XFxuICAgIHdpZHRoOiA0NSU7XFxuICAgIG1heC13aWR0aDogNDUlO1xcbiAgfVxcbn1cXG5cXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2NzBweCkge1xcbiAgaGVhZGVyIHtcXG4gICAgLyptaW4taGVpZ2h0OiA1MHB4OyovXFxuICB9XFxuICAjcmVzdGF1cmFudHMtbGlzdCBsaSB7XFxuICAgIG1heC13aWR0aDogODAlO1xcbiAgICBtYXJnaW46IDhweCBhdXRvO1xcbiAgfVxcbiAgLm5hdmlnYXRpb24gaDEgYXtcXG4gICAgZm9udC1zaXplOiAyLjZlbTtcXG4gIH1cXG4gIC5uYXZpZ2F0aW9uIGltZyB7XFxuICAgIHdpZHRoOiAzMHB4O1xcbiAgICBoZWlnaHQ6IDMwcHg7XFxuICB9XFxufVxcblxcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDU0MHB4KSB7XFxuXFxuICAubmF2aWdhdGlvbiBoMSBhe1xcbiAgICBmb250LXNpemU6IDEuN2VtO1xcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICB9XFxuICAubmF2aWdhdGlvbiBpbWcge1xcbiAgICBkaXNwbGF5OiBub25lO1xcbiAgfVxcbiAgLmZpbHRlci1vcHRpb25zIHNlbGVjdCB7XFxuICAgIHdpZHRoOiA1MCUpO1xcbiAgfVxcbiAgI3Jlc3RhdXJhbnQtY29udGFpbmVyIGgxLCAjcmV2aWV3cy1jb250YWluZXIgaDIge1xcbiAgICBmb250LXNpemU6IDEuNWVtO1xcbiAgfVxcbiAgI3Jlc3RhdXJhbnQtaW1nIHtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGhlaWdodDogNDAwcHg7XFxuICB9XFxuICAjcmVzdGF1cmFudC1hZGRyZXNzIHtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICB9XFxuICAjcmVzdGF1cmFudC1ob3VycyB7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgfVxcbiAgI3Jlc3RhdXJhbnQtaG91cnMgdGQge1xcbiAgICBmb250LXNpemU6IDFlbTtcXG4gIH1cXG4gICNyZXN0YXVyYW50LWN1aXNpbmUge1xcbiAgICBmb250LXNpemU6IDFlbTtcXG4gIH1cXG59XFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDUwcHgpIHtcXG4gIC5maWx0ZXItb3B0aW9ucyBzZWxlY3Qge1xcbiAgICB3aWR0aDogY2FsYygxMDAlIC0gMjRweCk7XFxuICAgIG1hcmdpbjogMTBweDtcXG4gIH1cXG4gICNyZXZpZXdzLWNvbnRhaW5lciB7XFxuICAgIHBhZGRpbmc6IDA7XFxuICB9XFxufVxcblwiLCBcIlwiXSk7XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiAnQG1lZGlhICcgKyBpdGVtWzJdICsgJ3snICsgY29udGVudCArICd9JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgfVxuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBtb2R1bGVzW2ldOyAvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG4gICAgICAvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuICAgICAgLy8gd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuICAgICAgLy8gSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXG4gICAgICBpZiAoaXRlbVswXSA9PSBudWxsIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGlmIChtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSAnKCcgKyBpdGVtWzJdICsgJykgYW5kICgnICsgbWVkaWFRdWVyeSArICcpJztcbiAgICAgICAgfVxuXG4gICAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuICcvKiMgc291cmNlVVJMPScgKyBjc3NNYXBwaW5nLnNvdXJjZVJvb3QgKyBzb3VyY2UgKyAnICovJztcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSAnc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJyArIGJhc2U2NDtcbiAgcmV0dXJuICcvKiMgJyArIGRhdGEgKyAnICovJztcbn0iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgcGFyZW50KSB7XG4gIGlmIChwYXJlbnQpe1xuICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xuICB9XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG59O1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24odGFyZ2V0LCBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXNzaW5nIGZ1bmN0aW9uIGluIG9wdGlvbnMsIHRoZW4gdXNlIGl0IGZvciByZXNvbHZlIFwiaGVhZFwiIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgLy8gVXNlZnVsIGZvciBTaGFkb3cgUm9vdCBzdHlsZSBpLmVcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBpbnNlcnRJbnRvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvb1wiKS5zaGFkb3dSb290IH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdHZhciBzdHlsZVRhcmdldCA9IGdldFRhcmdldC5jYWxsKHRoaXMsIHRhcmdldCwgcGFyZW50KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUsIHRhcmdldCk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0aWYob3B0aW9ucy5hdHRycy5ub25jZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIG5vbmNlID0gZ2V0Tm9uY2UoKTtcblx0XHRpZiAobm9uY2UpIHtcblx0XHRcdG9wdGlvbnMuYXR0cnMubm9uY2UgPSBub25jZTtcblx0XHR9XG5cdH1cblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBnZXROb25jZSgpIHtcblx0aWYgKHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdHJldHVybiBfX3dlYnBhY2tfbm9uY2VfXztcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSB0eXBlb2Ygb3B0aW9ucy50cmFuc2Zvcm0gPT09ICdmdW5jdGlvbidcblx0XHQgPyBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKSBcblx0XHQgOiBvcHRpb25zLnRyYW5zZm9ybS5kZWZhdWx0KG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCJleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCkge1xuXG4gIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zZXJ2aWNld29ya2VyLmJ1bmRsZS5qcycpLnRoZW4ocmVnaXN0cmF0aW9uID0+IHtcbiAgICAgICBjb25zb2xlLmxvZygnU1cgcmVnaXN0ZXJlZDogJywgcmVnaXN0cmF0aW9uKTtcbiAgICAgICBjb25zb2xlLmxvZygnSEVMTE8gRlJPTSBSRUdJU1RSQVRJT04gSlMnKTtcbiAgICAgfSkuY2F0Y2gocmVnaXN0cmF0aW9uRXJyb3IgPT4ge1xuICAgICAgIGNvbnNvbGUubG9nKCdTVyByZWdpc3RyYXRpb24gZmFpbGVkOiAnLCByZWdpc3RyYXRpb25FcnJvcik7XG4gICAgIH0pO1xuICAgfSk7XG4gIH1cblxufSkoKTtcblxuXG4iLCJpbXBvcnQgJy4vc3R5bGVzLmNzcyc7XG5pbXBvcnQgcmVnaXN0cmF0aW9uIGZyb20gJy4vcmVnaXN0cmF0aW9uJztcbmltcG9ydCBEQkhlbHBlciBmcm9tICcuL2RiaGVscGVyJztcblxubGV0IHJlc3RhdXJhbnQ7XG5sZXQgc3VibWl0QnRuO1xudmFyIG5ld01hcDtcblxuLyoqXG4gKiBJbml0aWFsaXplIG1hcCBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4ge1xuICBpbml0TWFwKCk7XG5cbiAgc3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdC1mb3JtLWJ0bicpO1xuICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdWJtaXRSZXZpZXcpO1xufSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBsZWFmbGV0IG1hcFxuICovXG5jb25zdCBpbml0TWFwID0gKCkgPT4ge1xuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3TWFwID0gTC5tYXAoJ21hcCcsIHtcbiAgICAgICAgY2VudGVyOiBbcmVzdGF1cmFudC5sYXRsbmcubGF0LCByZXN0YXVyYW50LmxhdGxuZy5sbmddLFxuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBzZWxmLm5ld01hcCA9IG5ld01hcDtcbiAgICAgIEwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0uanBnNzA/YWNjZXNzX3Rva2VuPXttYXBib3hUb2tlbn0nLCB7XG4gICAgICAgIG1hcGJveFRva2VuOiAncGsuZXlKMUlqb2lkMlZ1ZEdsdUlpd2lZU0k2SW1OcWFYSjBOMjVpWmpGd2RqWXphM0E0TUd0MWFIVTJiakVpZlEuRG5ORlVvTjV1encwMWxfWEtfYzduUScsXG4gICAgICAgIG1heFpvb206IDE4LFxuICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvXCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAnICtcbiAgICAgICAgICAnPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCAnICtcbiAgICAgICAgICAnSW1hZ2VyeSDCqSA8YSBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9cIj5NYXBib3g8L2E+JyxcbiAgICAgICAgaWQ6ICdtYXBib3guc3RyZWV0cydcbiAgICAgIH0pLmFkZFRvKG5ld01hcCk7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubmV3TWFwKTtcbiAgICB9XG4gIH0pO1xuICBEQkhlbHBlci5uZXh0UGVuZGluZygpO1xufVxuXG4vKiB3aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIGNlbnRlcjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcbiAgICB9XG4gIH0pO1xufSAqL1xuXG4vKipcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cbiAqL1xuY29uc3QgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IChjYWxsYmFjaykgPT4ge1xuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcbiAgICBjb25zb2xlLmxvZygnc2VsZiByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICBpZiAoIWlkKSB7IC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xuICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgfSBlbHNlIHtcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICAgIHNlbGYucmVzdGF1cmFudCA9IHJlc3RhdXJhbnQ7XG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudClcbiAgICB9KTtcbiAgfVxufVxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2VcbiAqL1xuY29uc3QgZmlsbFJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSBgICR7cmVzdGF1cmFudC5uYW1lfSA8YnI+ICR7cmVzdGF1cmFudC5hZGRyZXNzfWA7XG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJ1xuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG5cbiAgY29uc3QgY3Vpc2luZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWN1aXNpbmUnKTtcbiAgY3Vpc2luZS5pbm5lckhUTUwgPSByZXN0YXVyYW50LmN1aXNpbmVfdHlwZTtcblxuICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xuICBpZiAocmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcbiAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xuICB9XG4gIC8vIGZpbGwgcmV2aWV3c1xuICBEQkhlbHBlci5mZXRjaFJldmlld3MocmVzdGF1cmFudC5pZCwgKGVycm9yLCByZXZpZXdzKSA9PiB7XG4gICAgZmlsbFJldmlld3NIVE1MKHJldmlld3MpO1xuXG4gIH0pO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuY29uc3QgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwgPSAob3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSA9PiB7XG4gIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgZGF5LmlubmVySFRNTCA9IGtleTtcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcblxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcbiAgICByb3cuYXBwZW5kQ2hpbGQodGltZSk7XG5cbiAgICBob3Vycy5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFsbCByZXZpZXdzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxuICovXG5jb25zdCBmaWxsUmV2aWV3c0hUTUwgPSAocmV2aWV3cyA9IHNlbGYucmVzdGF1cmFudC5yZXZpZXdzKSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpO1xuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gIHRpdGxlLmlubmVySFRNTCA9ICdSZXZpZXdzJztcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICBpZiAoIXJldmlld3MpIHtcbiAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgbm9SZXZpZXdzLmlubmVySFRNTCA9ICdObyByZXZpZXdzIHlldCEnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub1Jldmlld3MpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcbiAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XG4gICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlUmV2aWV3SFRNTChyZXZpZXcpKTtcbiAgfSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh1bCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNvbnN0IGNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgbGkuc2V0QXR0cmlidXRlKCdpZCcsIGByZXZpZXctbGktJHtyZXZpZXcuaWR9YClcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgbGkuYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgZGF0ZS5pbm5lckhUTUwgPSAnPHN0cm9uZz5DcmVhdGVkOjwvc3Ryb25nPiAnICsgKG5ldyBEYXRlKHJldmlldy5jcmVhdGVkQXQpKS50b0RhdGVTdHJpbmcoKTtcbiAgbGkuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWA7XG4gIGxpLmFwcGVuZENoaWxkKHJhdGluZyk7XG5cbiAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcbiAgbGkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xuXG5cbiAgcmV0dXJuIGxpO1xufVxuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmNvbnN0IGZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQ9c2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG59XG5cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xuY29uc3QgZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xuICBpZiAoIXVybClcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmICghcmVzdWx0c1syXSlcbiAgICByZXR1cm4gJyc7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59XG5cbmNvbnN0IHN1Ym1pdFJldmlldyA9ICgpID0+IHtcbiAgY29uc29sZS5sb2coJ3N1Ym1pdCByZXZpZXcgZnVuY3Rpb24nKTtcblxuICBsZXQgZm9ybURhdGEgPSBnZXRGb3JtVmFsdWVzKCk7XG4gIGlmKCEvW2EtekEtWl17Mix9JC9naS50ZXN0KGZvcm1EYXRhLm5hbWUpKSB7XG4gICAgYWxlcnQoJ25hbWUgaW5wdXQgbXVzdCBiZSBsZXR0ZXJzIG9ubHksIG1pbmltdW0gb2YgMiBjaGFyYWN0ZXJzJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmKCEvWzEtNV17MX0kL2dpLnRlc3QoZm9ybURhdGEucmF0aW5nKSkge1xuICAgIGFsZXJ0KCdyYXRpbmcgaW5wdXQgbXVzdCBiZSBhIG51bWJlciwgMS01Jyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmKGZvcm1EYXRhLmNvbW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICBhbGVydCgnY29tbWVudHMgaW5wdXQgbXVzdCBiZSBtaW5pbXVtIG9mIDMgY2hhcmFjdGVycycpO1xuICAgIHJldHVybjtcbiAgfVxuICBmb3JtRGF0YS5yZXN0YXVyYW50X2lkID0gc2VsZi5yZXN0YXVyYW50LmlkO1xuICBEQkhlbHBlci5zYXZlTmV3UmV2aWV3KGZvcm1EYXRhKS50aGVuKCByZXN1bHQgPT4ge1xuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgbGV0IGFsZXJ0TXNnID0gJ0NyZWF0ZWQgUmV2aWV3JztcbiAgICBhbGVydChhbGVydE1zZyk7XG4gICAgbGV0IG5ld19yZXZpZXdfYmxvY2sgPSBjcmVhdGVSZXZpZXdIVE1MKHJlc3VsdCk7XG4gICAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gICAgdWwuYXBwZW5kQ2hpbGQobmV3X3Jldmlld19ibG9jayk7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcmV2aWV3LWxpLSR7cmVzdWx0LmlkfWApO1xuICAgIGlmKGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcgJiYgZWxlbWVudC5zY3JvbGxJbnRvVmlldy5jb25zdHJ1Y3RvciA9PT0gRnVuY3Rpb24pIHtcbiAgICAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3QgZ2V0Rm9ybVZhbHVlcyA9ICgpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlLnRyaW0oKSxcbiAgICByYXRpbmc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYXRpbmcnKS52YWx1ZS50cmltKCksXG4gICAgY29tbWVudHM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXctZmllbGQnKS52YWx1ZS50cmltKClcbiAgfVxufVxuXG4iXSwic291cmNlUm9vdCI6IiJ9