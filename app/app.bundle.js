!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=8)}([function(n,e,t){"use strict";t.d(e,"a",function(){return i});var r=t(1);const o=Object(r.a)("rr-db",3,{upgrade(n,e){switch(e){case 0:n.createObjectStore("restaurants",{keyPath:"id"}).createIndex("id","id");case 1:n.createObjectStore("reviews",{keyPath:"id",autoIncrement:!0}).createIndex("restaurant_id","restaurant_id");case 2:n.createObjectStore("pending",{keyPath:"id",autoIncrement:!0})}}});class i{static get DATABASE_URL(){return"http://localhost:1337/restaurants"}static get DATABASE_REVIEWS_URL(){return"http://localhost:1337/reviews"}static fetchRestaurants(n){fetch(i.DATABASE_URL).then(function(e){e.json().then(function(e){n(null,e)})})}static fetchReviews(n,e){let t=i.DATABASE_REVIEWS_URL+"/?restaurant_id="+n;fetch(t).then(n=>n.json()).then(n=>{e(null,n)}).catch(n=>{e(n,null)})}static fetchRestaurantById(n,e){i.fetchRestaurants((t,r)=>{if(t)e(t,null);else{const t=r.find(e=>e.id==n);t?e(null,t):e("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(n,e){i.fetchRestaurants((t,r)=>{if(t)e(t,null);else{const t=r.filter(e=>e.cuisine_type==n);e(null,t)}})}static fetchRestaurantByNeighborhood(n,e){i.fetchRestaurants((t,r)=>{if(t)e(t,null);else{const t=r.filter(e=>e.neighborhood==n);e(null,t)}})}static fetchRestaurantByCuisineAndNeighborhood(n,e,t){i.fetchRestaurants((r,o)=>{if(r)t(r,null);else{let r=o;"all"!=n&&(r=r.filter(e=>e.cuisine_type==n)),"all"!=e&&(r=r.filter(n=>n.neighborhood==e)),t(null,r)}})}static fetchNeighborhoods(n){i.fetchRestaurants((e,t)=>{if(e)n(e,null);else{const e=t.map((n,e)=>t[e].neighborhood),r=e.filter((n,t)=>e.indexOf(n)==t);n(null,r)}})}static fetchCuisines(n){i.fetchRestaurants((e,t)=>{if(e)n(e,null);else{const e=t.map((n,e)=>t[e].cuisine_type),r=e.filter((n,t)=>e.indexOf(n)==t);n(null,r)}})}static urlForRestaurant(n){return`./restaurant.html?id=${n.id}`}static imageUrlForRestaurant(n){return n.photograph?`/img/${n.photograph}.jpg`:`/img/${n.id}.jpg`}static mapMarkerForRestaurant(n,e){const t=new L.marker([n.latlng.lat,n.latlng.lng],{title:n.name,alt:n.name,url:i.urlForRestaurant(n)});return t.addTo(newMap),t}static updateCachedRestaurantReview(n){return console.log("updating cache for new review",n),o.then(e=>{const t=e.transaction("reviews","readwrite"),r=t.objectStore("reviews");return console.log("putting review in store"),r.put(n),console.log("successfully put review in store"),t.done})}static saveNewReview(n){const e=i.DATABASE_REVIEWS_URL;return i.updateCachedRestaurantReview(n),i.addPendingRequestToQue(e,"POST",n).then(n=>n)}static addPendingRequestToQue(n,e,t){return new Promise((r,a)=>{o.then(r=>{r.transaction("pending","readwrite").objectStore("pending").put({data:{url:n,method:e,formData:t}})}).catch(n=>{console.log(n)}).then(i.nextPending((n,e)=>(console.log(e),r(e))))})}static nextPending(n){i.attemptCommitPending(i.nextPending).then(e=>{console.log(e),n(null,e)})}static attemptCommitPending(n){let e,t,r;return new Promise((i,a)=>{o.then(o=>{if(!o.objectStoreNames.length)return console.log("DB not available"),void o.close();o.transaction("pending","readwrite").objectStore("pending").openCursor().then(a=>{if(!a)return;a.value;if(e=a.value.data.url,t=a.value.data.method,r=a.value.data.formData,!e||!t||"POST"===t&&!r)return void a.delete().then(n());const s={body:JSON.stringify(r),method:t};fetch(e,s).then(n=>n.ok||n.redirected?n.json():(console.log("this is the response and we are offline"),void console.log(n))).then(e=>{o.transaction("pending","readwrite").objectStore("pending").openCursor().then(t=>{t.delete().then(()=>(n(),console.log(e),i(e)))}),console.log("deleted item from pending store")}).catch(n=>{console.log(n)})})})})}static syncRestaurant(n){try{let e=`http://localhost:1337/restaurants/${n.id}/?is_favorite=${n.is_favorite}`;return fetch(e,{method:"PUT"}).then(function(n){return n.json()})}catch(e){console.log("error updating restaurant backend data...",e,n)}}static updateRestaurantInDB(n){return o.then(function(e){let t=e.transaction("restaurants","readwrite");return t.objectStore("restaurants").put(n),t.complete}).then(function(){return Promise.resolve(n)})}static toggleFavBtn(n){return o.then(e=>{return e.transaction("restaurants").objectStore("restaurants").get(n)}).then(n=>{console.log(n);const e=Object.assign({},n);return e.is_favorite="true"===n.is_favorite||!0===n.is_favorite?"false":"true",i.syncRestaurant(e),i.updateRestaurantInDB(e)}).then(n=>{const e=document.getElementById(`fav-btn-${n.id}`);"true"===n.is_favorite||!0===n.is_favorite?(e.innerHTML="Favorited!",e.style.background="hotpink"):(e.innerHTML="Add to favorite",e.style.background="grey")})}}},function(n,e,t){"use strict";const r=(n,e)=>e.some(e=>n instanceof e);let o,i;const a=new WeakMap,s=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap;let u={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return s.get(n);if("objectStoreNames"===e)return n.objectStoreNames||c.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return h(n[e])},has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function f(n){return n===IDBDatabase.prototype.transaction&&"objectStoreNames"in IDBTransaction.prototype?function(e,...t){const r=n.call(g(this),e,...t);return c.set(r,e.sort?e.sort():[e]),h(r)}:(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(g(this),e),h(a.get(this))}:function(...e){return h(n.apply(g(this),e))}}function p(n){return"function"==typeof n?f(n):(n instanceof IDBTransaction&&function(n){if(s.has(n))return;const e=new Promise((e,t)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",i),n.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{t(n.error),r()};n.addEventListener("complete",o),n.addEventListener("error",i),n.addEventListener("abort",i)});s.set(n,e)}(n),r(n,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,u):n)}function h(n){if(n instanceof IDBRequest)return function(n){const e=new Promise((e,t)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",i)},o=()=>{e(h(n.result)),r()},i=()=>{t(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&a.set(e,n)}),d.set(e,n),e}(n);if(l.has(n))return l.get(n);const e=p(n);return e!==n&&(l.set(n,e),d.set(e,n)),e}const g=n=>d.get(n);function m(n,e,{blocked:t,upgrade:r,blocking:o}={}){const i=indexedDB.open(n,e),a=h(i);return r&&i.addEventListener("upgradeneeded",n=>{r(h(i.result),n.oldVersion,n.newVersion,h(i.transaction))}),t&&i.addEventListener("blocked",()=>t()),o&&a.then(n=>n.addEventListener("versionchange",o)),a}t.d(e,"a",function(){return m});const b=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],x=new Map;function w(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(x.get(e))return x.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t;if(!(t in(r?IDBIndex:IDBObjectStore).prototype))return;let o;return b.includes(t)&&(o=function(n,...e){let o=this.transaction(n).store;return r&&(o=o.index(e.shift())),o[t](...e)}),v.includes(t)&&(o=function(n,...e){const r=this.transaction(n,"readwrite");return r.store[t](...e),r.done}),o&&x.set(e,o),o}u=(n=>({get:(e,t,r)=>w(e,t)||n.get(e,t,r),has:(e,t)=>!!w(e,t)||n.has(e,t)}))(u)},function(n,e,t){var r=t(3);"string"==typeof r&&(r=[[n.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t(5)(r,o);r.locals&&(n.exports=r.locals)},function(n,e,t){(n.exports=t(4)(!1)).push([n.i,'@charset "utf-8";\n/* CSS Document */\n* {\n  box-sizing: border-box;\n  margin:0;\n  padding:0;\n}\n\n/* Define base font-size here; most elements will inherit this. */\nhtml{\n    font-size:1em;      /* Assuming 16px... */\n    line-height:1.5;\n    font-family: Arial, Helvetica, sans-serif;\n    color: #333;\n}\n\nbody,td,th,p{\n\tfont-family: Arial, Helvetica, sans-serif;\n\tfont-size: 1em;\n\tcolor: #333;\n\tline-height: 1.5;\n}\nbody {\n  max-width: 1100px;\n\tbackground-color: #fdfdfd;\n\tmargin: 0 auto;\n\tposition:relative;\n}\n\nmain, section {\n  width: 100%;\n}\nul, li {\n\tfont-family: Arial, Helvetica, sans-serif;\n\tfont-size: 10pt;\n\tcolor: #333;\n}\na {\n\tcolor: orange;\n\ttext-decoration: none;\n}\na:hover, a:focus {\n\tcolor: #3397db;\n\ttext-decoration: none;\n}\na img{\n\tborder: none 0px #fff;\n}\nh1, h2, h3, h4, h5, h6 {\n  font-family: Arial, Helvetica, sans-serif;\n  margin: 0 0 20px;\n}\narticle, aside, canvas, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\n.maincontent {\n  background-color: #f3f3f3;\n  min-height: 100%;\n}\n#footer {\n  background-color: #444;\n  color: #aaa;\n  font-size: 8pt;\n  letter-spacing: 1px;\n  padding: 25px;\n  text-align: center;\n  text-transform: uppercase;\n}\n\n.navigation h1 a:hover, .navigation h1 a:focus, a:focus, a:hover, button:hover,\nbutton:focus {\n  color:rgba(85,172,238 ,1);\n  text-decoration: underline;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14),\n              0 3px 1px -2px rgba(0, 0, 0, .2),\n              0 1px 5px 0 rgba(0, 0, 0, .12);\n}\n#restaurants-list li button:hover, #restaurants-list li .button:focus,\n.filter-options select:hover, .filter-options select:focus, #submit-form-btn:hover, #submit-form-btn:focus {\n  background-color:rgba(85,172,238 ,1);\n  color: #fff;\n  text-decoration: underline;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14),\n              0 3px 1px -2px rgba(0, 0, 0, .2),\n              0 1px 5px 0 rgba(0, 0, 0, .12);\n}\n\n/* ====================== Navigation ====================== */\nheader {\n    width: 100%;\n    background: #333;\n}\nul {\n  padding: 0;\n  list-style: none;\n}\n.navigation {\n  display:flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 10px;\n  color: rgba(117,117,117 ,1);\n}\n.navigation h1 {\n text-align: center;\n font-size: 1em;\n margin-bottom: 0;\n}\n\n.navigation li {\n  height: 100%;\n}\n\n.navigation .navigation__title {\n flex-grow: 1;\n}\n.navigation img {\n  width: 48px;\n  height: 48px;\n  background-color: white;\n}\n.navigation h1 a {\n  color: #fff;\n  font-size: 48px;\n  font-weight: 200;\n  letter-spacing: 10px;\n  margin: 10px auto;\n  font-family: \'Pacifico\', cursive;\n}\n#breadcrumb {\n    padding: 10px;\n    list-style: none;\n    background-color: #eee;\n    font-size: 17px;\n    margin: 0;\n    width: 100%;\n}\n\n/* Display list items side by side */\n#breadcrumb li {\n    display: inline;\n}\n\n/* Add a slash symbol (/) before/behind each list item */\n#breadcrumb li+li:before {\n    padding: 8px;\n    color: black;\n    content: "/\\00a0";\n}\n\n/* Add a color to all links inside the list */\n#breadcrumb li a {\n    color: #0275d8;\n    text-decoration: none;\n}\n\n/* Add a color on mouse-over */\n#breadcrumb li a:hover {\n    color: #01447e;\n    text-decoration: underline;\n}\n/* ====================== Map ====================== */\n#map {\n  height: 400px;\n  width: 100%;\n  background-color: #ccc;\n}\n/* ====================== Restaurant Filtering ====================== */\n.filter-options {\n  width: 100%;\n  background-color: #333;\n  align-items: center;\n}\n.filter-options h2 {\n  color: white;\n  font-size: 1rem;\n  font-weight: normal;\n  line-height: 1;\n  margin: 0 10px;\n  padding-top: 10px;\n}\n.filter-options select {\n  background-color: white;\n  border: 1px solid #fff;\n  font-family: Arial,sans-serif;\n  font-size: 11pt;\n  height: 35px;\n  letter-spacing: 0;\n  margin: 10px;\n  padding: 10px;\n  width: 200px;\n}\n.filter-label {\n  display: none;\n}\n\n.filter-section {\n  width: 100%;\n}\n\n/* ====================== Restaurant Listing ====================== */\n\n/*========\n===Flexbox on list and content\n========*/\n\n#restaurants-list {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  background-color: #f3f3f3;\n  list-style: outside none none;\n  margin: 0;\n  padding: 30px 15px 60px;\n  text-align: center;\n}\n#restaurants-list li {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  flex-grow: 1;\n  background-color: #fff;\n  border: 2px solid #ccc;\n  font-family: Arial,sans-serif;\n  margin: 15px;\n  min-height: 380px;\n  padding: 0 30px 25px;\n  text-align: left;\n  width: 100%;\n}\n#restaurants-list .restaurant-img {\n  background-color: #ccc;\n  display: block;\n  margin: 0;\n  max-width: 100%;\n  max-height: 300px;\n  min-width: 100%;\n}\n#restaurants-list li h1 {\n  color: #f18200;\n  font-family: Arial,sans-serif;\n  font-size: 14pt;\n  font-weight: 200;\n  letter-spacing: 0;\n  line-height: 1.3;\n  margin: 20px 0 10px;\n  text-transform: uppercase;\n\n}\n#restaurants-list p {\n  margin: 0;\n  font-size: 11pt;\n}\n#restaurants-list li button {\n  background-color: orange;\n  border-bottom: 3px solid #eee;\n  color: #fff;\n  display: inline-block;\n  font-size: 10pt;\n  margin: 15px 0 0;\n  padding: 8px 30px 10px;\n  text-align: center;\n  text-decoration: none;\n  text-transform: uppercase;\n}\n\n\n/* ====================== Restaurant Details ====================== */\n.inside header {\n  /*position: fixed;*/\n  /*top: 0;*/\n  width: 100%;\n  /*z-index: 1000;*/\n}\n.inside #map-container {\n  /*background: blue none repeat scroll 0 0;*/\n  height: 200px;\n  padding-bottom: 10px;\n}\n.inside #map {\n  background-color: #ccc;\n  height: 100%;\n  width: 100%;\n}\n.inside #footer {\n/*  bottom: 0;\n  position: absolute;*/\n  width: 100%;\n}\n#restaurant-name {\n  color: #f18200;\n  font-family: Arial,sans-serif;\n  font-size: 24pt;\n  font-weight: 200;\n  letter-spacing: 0;\n  margin: 10px auto;\n  text-transform: uppercase;\n  line-height: 1.1;\n}\n#restaurant-img {\n\twidth: 100%;\n  max-height: 80vh;\n}\n#restaurant-address {\n  font-size: 1.3em;\n  margin: 10px 0px;\n  width: 50%;\n}\n#restaurant-cuisine {\n  background-color: #333;\n  color: #ddd;\n  font-size: 1.2em;\n  font-weight: 300;\n  letter-spacing: 10px;\n  margin: 0 0 20px;\n  padding: 2px 0;\n  text-align: center;\n  text-transform: uppercase;\n\twidth: 100%;\n}\n#restaurant-container, #reviews-container, #reviews-form-container{\n  border-bottom: 1px solid #d9d9d9;\n  border-top: 1px solid #fff;\n  padding: 20px;\n  width: 100%;\n  display:flex;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n#reviews-container, #reviews-form-container {\n  padding: 30px 40px 40px;\n}\n#reviews-container h2, #reviews-form-container h2 {\n  color: #f58500;\n  font-size: 24pt;\n  font-weight: 300;\n  letter-spacing: -1px;\n  padding-bottom: 1pt;\n  margin: 0 auto;\n}\n#reviews-list {\n  margin: 0;\n  padding: 0;\n}\n#reviews-list li {\n  background-color: #fff;\n  border: 2px solid #f3f3f3;\n  display: block;\n  list-style-type: none;\n  margin: 0 0 30px;\n  overflow: hidden;\n  padding: 10px 20px 20px;\n  /*position: relative;*/\n  width: 100%;\n}\n#reviews-list li p {\n  margin: 0 0 10px;\n}\n#restaurant-hours {\n  width: 50%;\n}\n#restaurant-hours td {\n  color: #666;\n  font-size: 1em;\n}\n\n#create-edit-review-form {\n  width: 100%;\n}\n#create-edit-review-form label {\n  display: block;\n  margin: 0 auto;\n  text-align: center;\n  font-size: 1rem;\n}\n\n#create-edit-review-form input, #create-edit-review-form textarea {\n  display: block;\n  margin: 0 auto;\n  border: 1px solid gray;\n  padding: 5px;\n  width: 50%;\n}\n\n.submit-form-button {\n    display:block;\n    color: white;\n    background: orange;\n    padding: 10px;\n    width: 20%;\n    margin: 10px;\n    text-align: center;\n}\n\n/*//////////\n// Media Queries\n//////////*/\n\n@media screen and (min-width: 1000px) {\n  #restaurants-list li {\n    max-width: 30%;\n  }\n}\n@media screen and (max-width: 999px) and (min-width: 671px) {\n  #restaurants-list li {\n    min-width: 290px;\n    width: 45%;\n    max-width: 45%;\n  }\n}\n\n@media screen and (max-width: 670px) {\n  header {\n    /*min-height: 50px;*/\n  }\n  #restaurants-list li {\n    max-width: 80%;\n    margin: 8px auto;\n  }\n  .navigation h1 a{\n    font-size: 2.6em;\n  }\n  .navigation img {\n    width: 30px;\n    height: 30px;\n  }\n}\n\n@media screen and (max-width: 540px) {\n\n  .navigation h1 a{\n    font-size: 1.7em;\n    display: inline-block;\n  }\n  .navigation img {\n    display: none;\n  }\n  .filter-options select {\n    width: 50%);\n  }\n  #restaurant-container h1, #reviews-container h2 {\n    font-size: 1.5em;\n  }\n  #restaurant-img {\n    width: 100%;\n    height: 400px;\n  }\n  #restaurant-address {\n    width: 100%;\n  }\n  #restaurant-hours {\n    width: 100%;\n  }\n  #restaurant-hours td {\n    font-size: 1em;\n  }\n  #restaurant-cuisine {\n    font-size: 1em;\n  }\n}\n@media screen and (max-width: 450px) {\n  .filter-options select {\n    width: calc(100% - 24px);\n    margin: 10px;\n  }\n  #reviews-container {\n    padding: 0;\n  }\n}\n',""])},function(n,e,t){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t=function(n,e){var t=n[1]||"",r=n[3];if(!r)return t;if(e&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(n){return"/*# sourceURL="+r.sourceRoot+n+" */"});return[t].concat(i).concat([o]).join("\n")}var a;return[t].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},e.i=function(n,t){"string"==typeof n&&(n=[[null,n,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<n.length;o++){var a=n[o];null!=a[0]&&r[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),e.push(a))}},e}},function(n,e,t){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(n){var e={};return function(n,t){if("function"==typeof n)return n();if(void 0===e[n]){var r=function(n,e){return e?e.querySelector(n):document.querySelector(n)}.call(this,n,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}e[n]=r}return e[n]}}(),c=null,l=0,d=[],u=t(6);function f(n,e){for(var t=0;t<n.length;t++){var r=n[t],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(v(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function p(n,e){for(var t=[],r={},o=0;o<n.length;o++){var i=n[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):t.push(r[a]={id:a,parts:[s]})}return t}function h(n,e){var t=s(n.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===n.insertAt)r?r.nextSibling?t.insertBefore(e,r.nextSibling):t.appendChild(e):t.insertBefore(e,t.firstChild),d.push(e);else if("bottom"===n.insertAt)t.appendChild(e);else{if("object"!=typeof n.insertAt||!n.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(n.insertAt.before,t);t.insertBefore(e,o)}}function g(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n);var e=d.indexOf(n);e>=0&&d.splice(e,1)}function m(n){var e=document.createElement("style");if(void 0===n.attrs.type&&(n.attrs.type="text/css"),void 0===n.attrs.nonce){var r=function(){0;return t.nc}();r&&(n.attrs.nonce=r)}return b(e,n.attrs),h(n,e),e}function b(n,e){Object.keys(e).forEach(function(t){n.setAttribute(t,e[t])})}function v(n,e){var t,r,o,i;if(e.transform&&n.css){if(!(i="function"==typeof e.transform?e.transform(n.css):e.transform.default(n.css)))return function(){};n.css=i}if(e.singleton){var a=l++;t=c||(c=m(e)),r=y.bind(null,t,a,!1),o=y.bind(null,t,a,!0)}else n.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(n){var e=document.createElement("link");return void 0===n.attrs.type&&(n.attrs.type="text/css"),n.attrs.rel="stylesheet",b(e,n.attrs),h(n,e),e}(e),r=function(n,e,t){var r=t.css,o=t.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=u(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=n.href;n.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,t,e),o=function(){g(t),t.href&&URL.revokeObjectURL(t.href)}):(t=m(e),r=function(n,e){var t=e.css,r=e.media;r&&n.setAttribute("media",r);if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}.bind(null,t),o=function(){g(t)});return r(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;r(n=e)}else o()}}n.exports=function(n,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var t=p(n,e);return f(t,e),function(n){for(var r=[],o=0;o<t.length;o++){var a=t[o];(s=i[a.id]).refs--,r.push(s)}n&&f(p(n,e),e);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var x,w=(x=[],function(n,e){return x[n]=e,x.filter(Boolean).join("\n")});function y(n,e,t,r){var o=t?"":r.css;if(n.styleSheet)n.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),a=n.childNodes;a[e]&&n.removeChild(a[e]),a.length?n.insertBefore(i,a[e]):n.appendChild(i)}}},function(n,e){n.exports=function(n){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!n||"string"!=typeof n)return n;var t=e.protocol+"//"+e.host,r=t+e.pathname.replace(/\/[^\/]*$/,"/");return n.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(n,e){var o,i=e.trim().replace(/^"(.*)"$/,function(n,e){return e}).replace(/^'(.*)'$/,function(n,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?n:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?t+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(n,e,t){"use strict";"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/serviceworker.bundle.js").then(n=>{console.log("SW registered: ",n),console.log("HELLO FROM REGISTRATION JS")}).catch(n=>{console.log("SW registration failed: ",n)})})},function(n,e,t){n.exports=t(9)},function(n,e,t){"use strict";t.r(e);t(2),t(7);var r=t(0);var o;document.addEventListener("DOMContentLoaded",n=>{l(),i(),s(),r.a.nextPending()});const i=()=>{r.a.fetchNeighborhoods((n,e)=>{n?console.error(n):(self.neighborhoods=e,a())})},a=(n=self.neighborhoods)=>{const e=document.getElementById("neighborhoods-select");e.addEventListener("change",d),n.forEach(n=>{const t=document.createElement("option");t.innerHTML=n,t.value=n,e.append(t)})},s=()=>{r.a.fetchCuisines((n,e)=>{n?console.error(n):(self.cuisines=e,c())})},c=(n=self.cuisines)=>{const e=document.getElementById("cuisines-select");e.addEventListener("change",d),n.forEach(n=>{const t=document.createElement("option");t.innerHTML=n,t.value=n,e.append(t)})},l=()=>{o=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),self.newMap=o,L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1Ijoid2VudGluIiwiYSI6ImNqaXJ0N25iZjFwdjYza3A4MGt1aHU2bjEifQ.DnNFUoN5uzw01l_XK_c7nQ",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(o),d()},d=()=>{const n=document.getElementById("cuisines-select"),e=document.getElementById("neighborhoods-select"),t=n.selectedIndex,o=e.selectedIndex,i=n[t].value,a=e[o].value;r.a.fetchRestaurantByCuisineAndNeighborhood(i,a,(n,e)=>{n?console.error(n):(u(e),f())})},u=n=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(n=>n.remove()),self.markers=[],self.restaurants=n},f=(n=self.restaurants)=>{const e=document.getElementById("restaurants-list");n.forEach(n=>{console.log(n),e.append(p(n))}),h()},p=n=>{const e=document.createElement("li"),t=document.createElement("img"),o=document.createElement("div");t.className="restaurant-img",t.setAttribute("alt",n.name),t.src=r.a.imageUrlForRestaurant(n),console.log(t.src),o.append(t),e.append(o);const i=document.createElement("h1");i.innerHTML=n.name,e.append(i);const a=document.createElement("p");a.innerHTML=n.neighborhood,e.append(a);const s=document.createElement("p");s.innerHTML=n.address,e.append(s),console.log("is_favorite: ",n.is_favorite);const c=document.createElement("button");!n.is_favorite||n.is_favorite.toString();"true"===n.is_favorite||!0===n.is_favorite?(c.innerHTML="Favorited!",c.style.background="hotpink"):(c.innerHTML="Add to favorite",c.style.background="grey"),c.setAttribute("title",`toggle favorites for: ${n.name}`),c.setAttribute("id",`fav-btn-${n.id}`),c.setAttribute("data-restaurant-id",n.id),c.addEventListener("click",()=>{console.log("clicked favbtn"),r.a.toggleFavBtn(n.id)}),e.append(c);const l=document.createElement("button");return l.classList="button button--success",l.innerHTML="View Details",l.setAttribute("aria-label",n.name+n.neighborhood+n.address+"View Details"),l.onclick=(()=>{const e=r.a.urlForRestaurant(n);window.location=e}),e.append(l),e},h=(n=self.restaurants)=>{n.forEach(n=>{const e=r.a.mapMarkerForRestaurant(n,o);e.on("click",function(){window.location.href=e.options.url}),self.markers.push(e)})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwL3NyYy9kYmhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2VzbS9jaHVuay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL3N0eWxlcy5jc3M/OGRjNSIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL3N0eWxlcy5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL3JlZ2lzdHJhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3JjL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiREJIZWxwZXIiLCJpZGJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsImRiUHJvbWlzZSIsIm9wZW5EQiIsInVwZ3JhZGUiLCJkYiIsIm9sZFZlcnNpb24iLCJjcmVhdGVPYmplY3RTdG9yZSIsImtleVBhdGgiLCJjcmVhdGVJbmRleCIsImF1dG9JbmNyZW1lbnQiLCJEQVRBQkFTRV9VUkwiLCJEQVRBQkFTRV9SRVZJRVdTX1VSTCIsIltvYmplY3QgT2JqZWN0XSIsImNhbGxiYWNrIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwicmVzdGF1cmFudHMiLCJyZXN0YXVyYW50X2lkIiwiZmV0Y2hVUkwiLCJyZXZpZXdzIiwiY2F0Y2giLCJlcnJvciIsImlkIiwiZmV0Y2hSZXN0YXVyYW50cyIsInJlc3RhdXJhbnQiLCJmaW5kIiwiY3Vpc2luZSIsInJlc3VsdHMiLCJmaWx0ZXIiLCJjdWlzaW5lX3R5cGUiLCJuZWlnaGJvcmhvb2QiLCJuZWlnaGJvcmhvb2RzIiwibWFwIiwidiIsInVuaXF1ZU5laWdoYm9yaG9vZHMiLCJpbmRleE9mIiwiY3Vpc2luZXMiLCJ1bmlxdWVDdWlzaW5lcyIsInBob3RvZ3JhcGgiLCJtYXJrZXIiLCJMIiwibGF0bG5nIiwibGF0IiwibG5nIiwidGl0bGUiLCJhbHQiLCJ1cmwiLCJ1cmxGb3JSZXN0YXVyYW50IiwiYWRkVG8iLCJuZXdNYXAiLCJmb3JtRGF0YSIsImNvbnNvbGUiLCJsb2ciLCJ0eCIsInRyYW5zYWN0aW9uIiwic3RvcmUiLCJvYmplY3RTdG9yZSIsInB1dCIsImRvbmUiLCJ1cGRhdGVDYWNoZWRSZXN0YXVyYW50UmV2aWV3IiwiYWRkUGVuZGluZ1JlcXVlc3RUb1F1ZSIsIm1ldGhvZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGF0YSIsIm5leHRQZW5kaW5nIiwiYXR0ZW1wdENvbW1pdFBlbmRpbmciLCJqIiwiYm9keSIsIm9iamVjdFN0b3JlTmFtZXMiLCJsZW5ndGgiLCJjbG9zZSIsIm9wZW5DdXJzb3IiLCJjdXJzb3IiLCJkZWxldGUiLCJwcm9wZXJ0aWVzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwicmVkaXJlY3RlZCIsImlzX2Zhdm9yaXRlIiwiZSIsIm5ld19yZXN0YXVyYW50IiwiY29tcGxldGUiLCJhc3NpZ24iLCJzeW5jUmVzdGF1cmFudCIsInVwZGF0ZVJlc3RhdXJhbnRJbkRCIiwiZmF2QnRuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsInN0eWxlIiwiYmFja2dyb3VuZCIsImluc3RhbmNlT2ZBbnkiLCJjb25zdHJ1Y3RvcnMiLCJzb21lIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwidGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiSURCVHJhbnNhY3Rpb24iLCJ1bmRlZmluZWQiLCJ3cmFwIiwiaGFzIiwid3JhcEZ1bmN0aW9uIiwiZnVuYyIsIklEQkRhdGFiYXNlIiwic3RvcmVOYW1lcyIsImFyZ3MiLCJ1bndyYXAiLCJ0aGlzIiwic2V0Iiwic29ydCIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsImluY2x1ZGVzIiwiYXBwbHkiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJyZXF1ZXN0IiwicHJvbWlzZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJ2ZXJzaW9uIiwiYmxvY2tlZCIsImJsb2NraW5nIiwiaW5kZXhlZERCIiwib3BlbiIsIm9wZW5Qcm9taXNlIiwiZXZlbnQiLCJuZXdWZXJzaW9uIiwicmVhZE1ldGhvZHMiLCJ3cml0ZU1ldGhvZHMiLCJjYWNoZWRNZXRob2RzIiwiTWFwIiwiZ2V0TWV0aG9kIiwidGFyZ2V0RnVuY05hbWUiLCJyZXBsYWNlIiwidXNlSW5kZXgiLCJzdG9yZU5hbWUiLCJpbmRleCIsInNoaWZ0Iiwib2xkVHJhcHMiLCJjb250ZW50Iiwib3B0aW9ucyIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJsb2NhbHMiLCJwdXNoIiwidXNlU291cmNlTWFwIiwibGlzdCIsInRvU3RyaW5nIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY29uY2F0Iiwiam9pbiIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJtZWRpYVF1ZXJ5IiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImFsbCIsImF0b2IiLCJhcmd1bWVudHMiLCJnZXRFbGVtZW50IiwicGFyZW50Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlc0luc2VydGVkQXRUb3AiLCJmaXhVcmxzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJkb21TdHlsZSIsInJlZnMiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4Iiwic3BsaWNlIiwiY3JlYXRlU3R5bGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJzIiwidHlwZSIsIm5vbmNlIiwibmMiLCJnZXROb25jZSIsImFkZEF0dHJzIiwiZWwiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsIm9iaiIsInVwZGF0ZSIsInJlbW92ZSIsImRlZmF1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJhdXRvRml4VXJscyIsImNvbnZlcnRUb0Fic29sdXRlVXJscyIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJCb29sZWFuIiwiY3NzTm9kZSIsImNoaWxkTm9kZXMiLCJsb2NhdGlvbiIsImJhc2VVcmwiLCJwcm90b2NvbCIsImhvc3QiLCJjdXJyZW50RGlyIiwicGF0aG5hbWUiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsInJlZ2lzdHJhdGlvbiIsInJlZ2lzdHJhdGlvbkVycm9yIiwiX2RiaGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJpbml0TWFwIiwiZmV0Y2hOZWlnaGJvcmhvb2RzIiwiZmV0Y2hDdWlzaW5lcyIsInNlbGYiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJzZWxlY3QiLCJ1cGRhdGVSZXN0YXVyYW50cyIsIm9wdGlvbiIsImFwcGVuZCIsImZpbGxDdWlzaW5lc0hUTUwiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwidGlsZUxheWVyIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiYXR0cmlidXRpb24iLCJjU2VsZWN0IiwiblNlbGVjdCIsImNJbmRleCIsInNlbGVjdGVkSW5kZXgiLCJuSW5kZXgiLCJmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QiLCJyZXNldFJlc3RhdXJhbnRzIiwiZmlsbFJlc3RhdXJhbnRzSFRNTCIsIm1hcmtlcnMiLCJ1bCIsImNyZWF0ZVJlc3RhdXJhbnRIVE1MIiwiYWRkTWFya2Vyc1RvTWFwIiwibGkiLCJpbWFnZSIsImRpdiIsImNsYXNzTmFtZSIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImFkZHJlc3MiLCJ0b2dnbGVGYXZCdG4iLCJtb3JlIiwiY2xhc3NMaXN0Iiwib25jbGljayIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJvbiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlB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QWMyUixLQUFLM1IsZUFDMUNBLEVBQVlvTyxRQUFRNU4sSUFFbEIsTUFBTWUsRUFBUzFDLElBQVNtVix1QkFBdUJ4VCxFQUFZeUIsR0FDM0RWLEVBQU8wUyxHQUFHLFFBQ1YsV0FDRWhKLE9BQU9vRixTQUFTZCxLQUFPaE8sRUFBTzZILFFBQVF0SCxNQUV4QzZQLEtBQUtzQixRQUFReEosS0FBS2xJIiwiZmlsZSI6ImFwcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOCk7XG4iLCIvKipcbiAqIENvbW1vbiBkYXRhYmFzZSBoZWxwZXIgZnVuY3Rpb25zLlxuICovXG5pbXBvcnQgeyBvcGVuREIsIGRlbGV0ZURCLCB3cmFwLCB1bndyYXAgfSBmcm9tICdpZGInO1xuXG5jb25zdCBkYlByb21pc2UgPSBvcGVuREIoJ3JyLWRiJywgMywge1xuICB1cGdyYWRlKGRiLCBvbGRWZXJzaW9uKSB7XG4gICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGNvbnN0IHN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoJ3Jlc3RhdXJhbnRzJywgeyBrZXlQYXRoOiAnaWQnLCB9KTtcbiAgICAgICAgc3RvcmUuY3JlYXRlSW5kZXgoJ2lkJywgJ2lkJyk7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGNvbnN0IHJldmlld3NTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdyZXZpZXdzJywge1xuICAgICAgICAgIGtleVBhdGg6ICdpZCcsXG4gICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV2aWV3c1N0b3JlLmNyZWF0ZUluZGV4KFwicmVzdGF1cmFudF9pZFwiLCBcInJlc3RhdXJhbnRfaWRcIik7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGNvbnN0IHBlbmRpbmdTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdwZW5kaW5nJywge1xuICAgICAgICAgIGtleVBhdGg6ICdpZCcsXG4gICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERCSGVscGVyIHtcblxuICAvKipcbiAgICogRGF0YWJhc2UgVVJMLlxuICAgKiBDaGFuZ2UgdGhpcyB0byByZXN0YXVyYW50cy5qc29uIGZpbGUgbG9jYXRpb24gb24geW91ciBzZXJ2ZXIuXG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEFCQVNFX1VSTCgpIHtcbiAgICBjb25zdCBwb3J0ID0gMTMzNy8vIENoYW5nZSB0aGlzIHRvIHlvdXIgc2VydmVyIHBvcnRcbiAgICByZXR1cm4gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS9yZXN0YXVyYW50c2A7XG4gIH1cblxuICBzdGF0aWMgZ2V0IERBVEFCQVNFX1JFVklFV1NfVVJMKCkge1xuICAgIGNvbnN0IHBvcnQgPSAxMzM3IC8vIENoYW5nZSB0aGlzIHRvIHlvdXIgc2VydmVyIHBvcnRcbiAgICByZXR1cm4gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS9yZXZpZXdzYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgcmVzdGF1cmFudHMuXG4gICAqL1xuXG5cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudHMoY2FsbGJhY2spIHtcbiAgICBmZXRjaChEQkhlbHBlci5EQVRBQkFTRV9VUkwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uKHJlc3RhdXJhbnRzKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGZldGNoUmV2aWV3cyggcmVzdGF1cmFudF9pZCwgY2FsbGJhY2spIHtcbiAgICBsZXQgZmV0Y2hVUkwgPSBEQkhlbHBlci5EQVRBQkFTRV9SRVZJRVdTX1VSTCArIFwiLz9yZXN0YXVyYW50X2lkPVwiICsgcmVzdGF1cmFudF9pZDtcbiAgICBmZXRjaChmZXRjaFVSTCkudGhlbiggcmVzcG9uc2UgPT4ge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9KS50aGVuKHJldmlld3MgPT4ge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXZpZXdzKTtcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyAgIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRSZXZpZXdzQnlJZChpZCwgY2FsbGJhY2spIHtcbiAgLy8gICAvLyBGZXRjaCBhbGwgcmV2aWV3cyBmb3IgdGhlIHNwZWNpZmljIHJlc3RhdXJhbnRcbiAgLy8gICBjb25zdCBmZXRjaFVSTCA9IERCSGVscGVyLkRBVEFCQVNFX1JFVklFV1NfVVJMICsgXCIvP3Jlc3RhdXJhbnRfaWQ9XCIgKyBpZDtcbiAgLy8gICBmZXRjaChmZXRjaFVSTCwge21ldGhvZDogXCJHRVRcIn0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAvLyAgICAgaWYgKCFyZXNwb25zZS5jbG9uZSgpLm9rICYmICFyZXNwb25zZS5jbG9uZSgpLnJlZGlyZWN0ZWQpIHtcbiAgLy8gICAgICAgdGhyb3cgXCJObyByZXZpZXdzIGF2YWlsYWJsZVwiO1xuICAvLyAgICAgfVxuICAvLyAgICAgcmVzcG9uc2VcbiAgLy8gICAgICAgLmpzb24oKVxuICAvLyAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAvLyAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gIC8vICAgICAgIH0pXG4gIC8vICAgfSkuY2F0Y2goZXJyb3IgPT4gY2FsbGJhY2soZXJyb3IsIG51bGwpKTtcbiAgLy8gfVxuICAvKipcbiAgICogRmV0Y2ggYSByZXN0YXVyYW50IGJ5IGl0cyBJRC5cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCBjYWxsYmFjaykge1xuICAgIC8vIGZldGNoIGFsbCByZXN0YXVyYW50cyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZXN0YXVyYW50ID0gcmVzdGF1cmFudHMuZmluZChyID0+IHIuaWQgPT0gaWQpO1xuICAgICAgICBpZiAocmVzdGF1cmFudCkgeyAvLyBHb3QgdGhlIHJlc3RhdXJhbnRcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcbiAgICAgICAgfSBlbHNlIHsgLy8gUmVzdGF1cmFudCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgICBjYWxsYmFjaygnUmVzdGF1cmFudCBkb2VzIG5vdCBleGlzdCcsIG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIHR5cGUgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lKGN1aXNpbmUsIGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzICB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gY3Vpc2luZSB0eXBlXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QobmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gbmVpZ2hib3Job29kXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgYW5kIGEgbmVpZ2hib3Job29kIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50c1xuICAgICAgICBpZiAoY3Vpc2luZSAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxuICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuY3Vpc2luZV90eXBlID09IGN1aXNpbmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZWlnaGJvcmhvb2QgIT0gJ2FsbCcpIHsgLy8gZmlsdGVyIGJ5IG5laWdoYm9yaG9vZFxuICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihyID0+IHIubmVpZ2hib3Job29kID09IG5laWdoYm9yaG9vZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hOZWlnaGJvcmhvb2RzKGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXG4gICAgICAgIGNvbnN0IG5laWdoYm9yaG9vZHMgPSByZXN0YXVyYW50cy5tYXAoKHYsIGkpID0+IHJlc3RhdXJhbnRzW2ldLm5laWdoYm9yaG9vZClcbiAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBuZWlnaGJvcmhvb2RzXG4gICAgICAgIGNvbnN0IHVuaXF1ZU5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzLmZpbHRlcigodiwgaSkgPT4gbmVpZ2hib3Job29kcy5pbmRleE9mKHYpID09IGkpXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZU5laWdoYm9yaG9vZHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCBjdWlzaW5lcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaEN1aXNpbmVzKGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gR2V0IGFsbCBjdWlzaW5lcyBmcm9tIGFsbCByZXN0YXVyYW50c1xuICAgICAgICBjb25zdCBjdWlzaW5lcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0uY3Vpc2luZV90eXBlKVxuICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGN1aXNpbmVzXG4gICAgICAgIGNvbnN0IHVuaXF1ZUN1aXNpbmVzID0gY3Vpc2luZXMuZmlsdGVyKCh2LCBpKSA9PiBjdWlzaW5lcy5pbmRleE9mKHYpID09IGkpXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZUN1aXNpbmVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXVyYW50IHBhZ2UgVVJMLlxuICAgKi9cbiAgc3RhdGljIHVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xuICAgIHJldHVybiAoYC4vcmVzdGF1cmFudC5odG1sP2lkPSR7cmVzdGF1cmFudC5pZH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXVyYW50IGltYWdlIFVSTC5cbiAgICovXG4gIHN0YXRpYyBpbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xuICAgIGlmKCFyZXN0YXVyYW50LnBob3RvZ3JhcGgpIHtcbiAgICAgIHJldHVybiAoYC9pbWcvJHtyZXN0YXVyYW50LmlkfS5qcGdgKVxuICAgIH1cbiAgICByZXR1cm4gKGAvaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBofS5qcGdgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgbWFya2VyIGZvciBhIHJlc3RhdXJhbnQuXG4gICAqL1xuICBzdGF0aWMgbWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtYXApIHtcbiAgICAvLyBodHRwczovL2xlYWZsZXRqcy5jb20vcmVmZXJlbmNlLTEuMy4wLmh0bWwjbWFya2VyXG4gICAgY29uc3QgbWFya2VyID0gbmV3IEwubWFya2VyKFtyZXN0YXVyYW50LmxhdGxuZy5sYXQsIHJlc3RhdXJhbnQubGF0bG5nLmxuZ10sXG4gICAgICB7dGl0bGU6IHJlc3RhdXJhbnQubmFtZSxcbiAgICAgIGFsdDogcmVzdGF1cmFudC5uYW1lLFxuICAgICAgdXJsOiBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXG4gICAgICB9KVxuICAgICAgbWFya2VyLmFkZFRvKG5ld01hcCk7XG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYWNoZWRSZXN0YXVyYW50UmV2aWV3KGZvcm1EYXRhKSB7XG4gICAgY29uc29sZS5sb2coJ3VwZGF0aW5nIGNhY2hlIGZvciBuZXcgcmV2aWV3JywgZm9ybURhdGEpO1xuICAgIHJldHVybiBkYlByb21pc2UudGhlbiggZGIgPT4ge1xuICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbigncmV2aWV3cycsICdyZWFkd3JpdGUnKTtcbiAgICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ3Jldmlld3MnKTtcbiAgICAgIGNvbnNvbGUubG9nKCdwdXR0aW5nIHJldmlldyBpbiBzdG9yZScpO1xuICAgICAgc3RvcmUucHV0KGZvcm1EYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzZnVsbHkgcHV0IHJldmlldyBpbiBzdG9yZScpO1xuICAgICAgcmV0dXJuIHR4LmRvbmU7XG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBzYXZlTmV3UmV2aWV3KGZvcm1EYXRhKSB7XG4gICAgLy8gQmxvY2sgYW55IG1vcmUgY2xpY2tzIG9uIHRoZSBzdWJtaXQgYnV0dG9uIHVudGlsIHRoZSBjYWxsYmFja1xuICAgIC8vIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LWZvcm0tYnRuXCIpO1xuICAgIC8vIGJ0bi5vbmNsaWNrID0gbnVsbDtcbiAgICBjb25zdCB1cmwgPSBEQkhlbHBlci5EQVRBQkFTRV9SRVZJRVdTX1VSTDtcbiAgICBjb25zdCBtZXRob2QgPSBcIlBPU1RcIjtcbiAgICBEQkhlbHBlci51cGRhdGVDYWNoZWRSZXN0YXVyYW50UmV2aWV3KGZvcm1EYXRhKTtcbiAgICByZXR1cm4gREJIZWxwZXIuYWRkUGVuZGluZ1JlcXVlc3RUb1F1ZSh1cmwsIG1ldGhvZCwgZm9ybURhdGEpLnRoZW4oanNvbiA9PiBqc29uKTtcblxuICB9XG5cbiAgc3RhdGljIGFkZFBlbmRpbmdSZXF1ZXN0VG9RdWUodXJsLCBtZXRob2QsIGZvcm1EYXRhKSB7XG4gICAgLy9vcGVuIGRhdGFiYXNlIGFuZCBhZGQgcmVxdWVzdCBkZXRhaWxzIHRvIHRoZSBwZW5kaW5nIHN0b3JlXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGRiUHJvbWlzZS50aGVuKGRiID0+IHtcbiAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oJ3BlbmRpbmcnLCAncmVhZHdyaXRlJyk7XG4gICAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdwZW5kaW5nJyk7XG4gICAgICBzdG9yZS5wdXQoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICBmb3JtRGF0YVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9KS50aGVuKERCSGVscGVyLm5leHRQZW5kaW5nKChlcnJvciwganNvbikgPT4ge1xuICAgICAgY29uc29sZS5sb2coanNvbik7XG4gICAgICByZXR1cm4gcmVzb2x2ZShqc29uKTtcbiAgICB9KSk7XG4gIH0pO1xuICB9XG5cbiAgc3RhdGljIG5leHRQZW5kaW5nKGNhbGxiYWNrKSB7XG4gICAgREJIZWxwZXIuYXR0ZW1wdENvbW1pdFBlbmRpbmcoREJIZWxwZXIubmV4dFBlbmRpbmcpLnRoZW4oaiA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhqKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIGopO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGF0dGVtcHRDb21taXRQZW5kaW5nKGNhbGxiYWNrKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBwZW5kaW5nIGl0ZW1zIHVudGlsIHRoZXJlIGlzIGEgbmV0d29yayBmYWlsdXJlXG4gICAgbGV0IHVybDtcbiAgICBsZXQgbWV0aG9kO1xuICAgIGxldCBib2R5O1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7IGRiUHJvbWlzZS50aGVuKGRiID0+IHtcbiAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJEQiBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKCdwZW5kaW5nJywgJ3JlYWR3cml0ZScpO1xuICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgncGVuZGluZycpO1xuICAgICAgc3RvcmUub3BlbkN1cnNvcigpLnRoZW4oIGN1cnNvciA9PiB7XG4gICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IGN1cnNvci52YWx1ZTtcbiAgICAgICAgdXJsID0gY3Vyc29yLnZhbHVlLmRhdGEudXJsO1xuICAgICAgICBtZXRob2QgPSBjdXJzb3IudmFsdWUuZGF0YS5tZXRob2Q7XG4gICAgICAgIGJvZHkgPSBjdXJzb3IudmFsdWUuZGF0YS5mb3JtRGF0YTtcblxuXG4gICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBwYXJhbWV0ZXIgdGhlbiB3ZSdyZSBvbiBhIGJhZCByZWNvcmQgdGhhdCBzaG91bGQgYmUgdG9zc2VkXG4gICAgICAgIC8vIGFuZCB0aGVuIG1vdmUgb25cbiAgICAgICAgaWYgKCghdXJsIHx8ICFtZXRob2QpIHx8IChtZXRob2QgPT09IFwiUE9TVFwiICYmICFib2R5KSkge1xuICAgICAgICAgIGN1cnNvclxuICAgICAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgICAgICAudGhlbihjYWxsYmFjaygpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICBtZXRob2Q6IG1ldGhvZFxuICAgICAgICB9XG4gICAgICAgIGZldGNoKHVybCwgcHJvcGVydGllcykudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIC8vIElmIHdlIGRvbid0IGdldCBhIGdvb2QgcmVzcG9uc2UgdGhlbiBhc3N1bWUgd2UncmUgb2ZmbGluZVxuICAgICAgICAgIGlmICghcmVzcG9uc2Uub2sgJiYgIXJlc3BvbnNlLnJlZGlyZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIHRoZSByZXNwb25zZSBhbmQgd2UgYXJlIG9mZmxpbmUnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfSkudGhlbiggaiA9PiB7XG4gICAgICAgICAgY29uc3QgZGVsdHggPSBkYi50cmFuc2FjdGlvbigncGVuZGluZycsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgICBjb25zdCBzdG9yZSA9IGRlbHR4Lm9iamVjdFN0b3JlKCdwZW5kaW5nJyk7XG4gICAgICAgICAgc3RvcmUub3BlbkN1cnNvcigpXG4gICAgICAgICAgICAudGhlbiggY3Vyc29yID0+IHtcbiAgICAgICAgICAgICAgY3Vyc29yLmRlbGV0ZSgpXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGopO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGopO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlZCBpdGVtIGZyb20gcGVuZGluZyBzdG9yZScpO1xuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIHN5bmNSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcbiAgICAgdHJ5IHtcbiAgICAgICBsZXQgdXJsID0gYGh0dHA6Ly9sb2NhbGhvc3Q6MTMzNy9yZXN0YXVyYW50cy8ke3Jlc3RhdXJhbnQuaWR9Lz9pc19mYXZvcml0ZT0ke3Jlc3RhdXJhbnQuaXNfZmF2b3JpdGV9YDtcbiAgICAgICBsZXQgcGFyYW1zID0ge21ldGhvZDogJ1BVVCd9O1xuICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHBhcmFtcykudGhlbihmdW5jdGlvbihyKXsgcmV0dXJuIHIuanNvbigpIH0pO1xuICAgICB9XG4gICAgIGNhdGNoKGUpIHtcbiAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgdXBkYXRpbmcgcmVzdGF1cmFudCBiYWNrZW5kIGRhdGEuLi4nLCBlLCByZXN0YXVyYW50KTtcbiAgICAgfVxuICB9XG4gICAgIHN0YXRpYyB1cGRhdGVSZXN0YXVyYW50SW5EQihuZXdfcmVzdGF1cmFudCkge1xuICAgICAgIHJldHVybiBkYlByb21pc2UudGhlbihmdW5jdGlvbihkYil7XG4gICAgICAgICBsZXQgdHggPSBkYi50cmFuc2FjdGlvbigncmVzdGF1cmFudHMnLCAncmVhZHdyaXRlJyk7XG4gICAgICAgICBsZXQgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgncmVzdGF1cmFudHMnKTtcbiAgICAgICAgIHN0b3JlLnB1dChuZXdfcmVzdGF1cmFudCk7XG4gICAgICAgICByZXR1cm4gdHguY29tcGxldGVcbiAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXdfcmVzdGF1cmFudCk7XG4gICAgICAgfSk7XG4gICAgIH1cblxuICBzdGF0aWMgdG9nZ2xlRmF2QnRuKHJlc3RhdXJhbnRfaWQpIHtcbiAgICByZXR1cm4gZGJQcm9taXNlLnRoZW4oIGRiID0+IHtcbiAgICAgIGxldCB0eCA9IGRiLnRyYW5zYWN0aW9uKCdyZXN0YXVyYW50cycpO1xuICAgICAgbGV0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ3Jlc3RhdXJhbnRzJyk7XG4gICAgICByZXR1cm4gc3RvcmUuZ2V0KHJlc3RhdXJhbnRfaWQpO1xuICAgIH0pLnRoZW4oIHJlc3RhdXJhbnQgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzdGF1cmFudCk7XG4gICAgICBjb25zdCBuZXdfcmVzdGF1cmFudCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3RhdXJhbnQpO1xuICAgICAgbmV3X3Jlc3RhdXJhbnQuaXNfZmF2b3JpdGUgPSAocmVzdGF1cmFudC5pc19mYXZvcml0ZSA9PT0gJ3RydWUnIHx8IHJlc3RhdXJhbnQuaXNfZmF2b3JpdGUgPT09IHRydWUpID9cbiAgICAgICdmYWxzZScgOiAndHJ1ZSc7XG4gICAgICBEQkhlbHBlci5zeW5jUmVzdGF1cmFudChuZXdfcmVzdGF1cmFudCk7XG4gICAgICByZXR1cm4gREJIZWxwZXIudXBkYXRlUmVzdGF1cmFudEluREIobmV3X3Jlc3RhdXJhbnQpO1xuICAgIH0pLnRoZW4oIG5ld19yZXN0YXVyYW50ID0+IHtcbiAgICAgIGNvbnN0IGZhdkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBmYXYtYnRuLSR7bmV3X3Jlc3RhdXJhbnQuaWR9YCk7XG4gICAgICBpZihuZXdfcmVzdGF1cmFudC5pc19mYXZvcml0ZSA9PT0gJ3RydWUnIHx8IG5ld19yZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09PSB0cnVlKSB7XG4gICAgICAgIGZhdkJ0bi5pbm5lckhUTUwgPSAnRmF2b3JpdGVkISc7XG4gICAgICAgIGZhdkJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJ2hvdHBpbmsnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmF2QnRuLmlubmVySFRNTCA9ICdBZGQgdG8gZmF2b3JpdGUnO1xuICAgICAgICBmYXZCdG4uc3R5bGUuYmFja2dyb3VuZCA9ICdncmV5JztcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbn1cblxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoYyA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xyXG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XHJcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxyXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcclxuICAgIHJldHVybiBpZGJQcm94eWFibGVUeXBlcyB8fFxyXG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtJREJEYXRhYmFzZSwgSURCT2JqZWN0U3RvcmUsIElEQkluZGV4LCBJREJDdXJzb3IsIElEQlRyYW5zYWN0aW9uXSk7XHJcbn1cclxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXHJcbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xyXG4gICAgcmV0dXJuIGN1cnNvckFkdmFuY2VNZXRob2RzIHx8IChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcclxuICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXHJcbiAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcclxuICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcclxuICAgIF0pO1xyXG59XHJcbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xyXG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcclxuICAgICAgICAgICAgdW5saXN0ZW4oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgICBwcm9taXNlLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxyXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcclxuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xyXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXHJcbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xyXG4gICAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XHJcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cclxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcclxuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgdW5saXN0ZW4oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IpO1xyXG4gICAgICAgICAgICB1bmxpc3RlbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XHJcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XHJcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XHJcbiAgICB9KTtcclxuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXHJcbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcclxufVxyXG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcclxuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XHJcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXHJcbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xyXG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXHJcbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXHJcbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXSA/XHJcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXHJcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcclxuICAgIH0sXHJcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcclxuICAgIH0sXHJcbn07XHJcbmZ1bmN0aW9uIGFkZFRyYXBzKGNhbGxiYWNrKSB7XHJcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XHJcbn1cclxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcclxuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXHJcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXHJcbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cclxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcclxuICAgICAgICAnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXHJcbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxyXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcclxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cclxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcclxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cclxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcclxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxyXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XHJcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxyXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cclxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxyXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XHJcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XHJcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcclxuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxyXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxyXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcclxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XHJcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXHJcbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxyXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XHJcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xyXG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXHJcbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cclxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcclxuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcclxuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3VmFsdWU7XHJcbn1cclxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0IHsgd3JhcCBhcyBhLCBhZGRUcmFwcyBhcyBiLCBpbnN0YW5jZU9mQW55IGFzIGMsIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBkLCB1bndyYXAgYXMgZSB9O1xuIiwiaW1wb3J0IHsgYSBhcyB3cmFwLCBiIGFzIGFkZFRyYXBzIH0gZnJvbSAnLi9jaHVuay5qcyc7XG5leHBvcnQgeyBlIGFzIHVud3JhcCwgYSBhcyB3cmFwIH0gZnJvbSAnLi9jaHVuay5qcyc7XG5cbi8qKlxyXG4gKiBPcGVuIGEgZGF0YWJhc2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxyXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cclxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cclxuICovXHJcbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nIH0gPSB7fSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xyXG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xyXG4gICAgaWYgKHVwZ3JhZGUpIHtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoYmxvY2tlZClcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xyXG4gICAgaWYgKGJsb2NraW5nKVxyXG4gICAgICAgIG9wZW5Qcm9taXNlLnRoZW4oZGIgPT4gZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIGJsb2NraW5nKSk7XHJcbiAgICByZXR1cm4gb3BlblByb21pc2U7XHJcbn1cclxuLyoqXHJcbiAqIERlbGV0ZSBhIGRhdGFiYXNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSk7XHJcbiAgICBpZiAoYmxvY2tlZClcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xyXG4gICAgcmV0dXJuIHdyYXAocmVxdWVzdCkudGhlbigoKSA9PiB1bmRlZmluZWQpO1xyXG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XHJcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcclxuY29uc3QgY2FjaGVkTWV0aG9kcyA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xyXG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcclxuICAgICAgICAhKHByb3AgaW4gdGFyZ2V0KSAmJlxyXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApKVxyXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcclxuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xyXG4gICAgY29uc3QgdXNlSW5kZXggPSBwcm9wICE9PSB0YXJnZXRGdW5jTmFtZTtcclxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cclxuICAgIGlmICghKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWV0aG9kO1xyXG4gICAgaWYgKHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkge1xyXG4gICAgICAgIG1ldGhvZCA9IGZ1bmN0aW9uIChzdG9yZU5hbWUsIC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lKS5zdG9yZTtcclxuICAgICAgICAgICAgaWYgKHVzZUluZGV4KVxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBpZiAod3JpdGVNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkge1xyXG4gICAgICAgIG1ldGhvZCA9IGZ1bmN0aW9uIChzdG9yZU5hbWUsIC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgICAgICB0eC5zdG9yZVt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0eC5kb25lO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBpZiAobWV0aG9kKVxyXG4gICAgICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XHJcbiAgICByZXR1cm4gbWV0aG9kO1xyXG59XHJcbmFkZFRyYXBzKG9sZFRyYXBzID0+ICh7XHJcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksXHJcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXHJcbn0pKTtcblxuZXhwb3J0IHsgb3BlbkRCLCBkZWxldGVEQiB9O1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGVzLmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIikoZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJAY2hhcnNldCBcXFwidXRmLThcXFwiO1xcbi8qIENTUyBEb2N1bWVudCAqL1xcbioge1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIG1hcmdpbjowO1xcbiAgcGFkZGluZzowO1xcbn1cXG5cXG4vKiBEZWZpbmUgYmFzZSBmb250LXNpemUgaGVyZTsgbW9zdCBlbGVtZW50cyB3aWxsIGluaGVyaXQgdGhpcy4gKi9cXG5odG1se1xcbiAgICBmb250LXNpemU6MWVtOyAgICAgIC8qIEFzc3VtaW5nIDE2cHguLi4gKi9cXG4gICAgbGluZS1oZWlnaHQ6MS41O1xcbiAgICBmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcXG4gICAgY29sb3I6ICMzMzM7XFxufVxcblxcbmJvZHksdGQsdGgscHtcXG5cXHRmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcXG5cXHRmb250LXNpemU6IDFlbTtcXG5cXHRjb2xvcjogIzMzMztcXG5cXHRsaW5lLWhlaWdodDogMS41O1xcbn1cXG5ib2R5IHtcXG4gIG1heC13aWR0aDogMTEwMHB4O1xcblxcdGJhY2tncm91bmQtY29sb3I6ICNmZGZkZmQ7XFxuXFx0bWFyZ2luOiAwIGF1dG87XFxuXFx0cG9zaXRpb246cmVsYXRpdmU7XFxufVxcblxcbm1haW4sIHNlY3Rpb24ge1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcbnVsLCBsaSB7XFxuXFx0Zm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxuXFx0Zm9udC1zaXplOiAxMHB0O1xcblxcdGNvbG9yOiAjMzMzO1xcbn1cXG5hIHtcXG5cXHRjb2xvcjogb3JhbmdlO1xcblxcdHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG59XFxuYTpob3ZlciwgYTpmb2N1cyB7XFxuXFx0Y29sb3I6ICMzMzk3ZGI7XFxuXFx0dGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbn1cXG5hIGltZ3tcXG5cXHRib3JkZXI6IG5vbmUgMHB4ICNmZmY7XFxufVxcbmgxLCBoMiwgaDMsIGg0LCBoNSwgaDYge1xcbiAgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxuICBtYXJnaW46IDAgMCAyMHB4O1xcbn1cXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBmaWdjYXB0aW9uLCBmaWd1cmUsIGZvb3RlciwgaGVhZGVyLCBoZ3JvdXAsIG1lbnUsIG5hdiwgc2VjdGlvbiB7XFxuXFx0ZGlzcGxheTogYmxvY2s7XFxufVxcbi5tYWluY29udGVudCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjNmM2YzO1xcbiAgbWluLWhlaWdodDogMTAwJTtcXG59XFxuI2Zvb3RlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0O1xcbiAgY29sb3I6ICNhYWE7XFxuICBmb250LXNpemU6IDhwdDtcXG4gIGxldHRlci1zcGFjaW5nOiAxcHg7XFxuICBwYWRkaW5nOiAyNXB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG59XFxuXFxuLm5hdmlnYXRpb24gaDEgYTpob3ZlciwgLm5hdmlnYXRpb24gaDEgYTpmb2N1cywgYTpmb2N1cywgYTpob3ZlciwgYnV0dG9uOmhvdmVyLFxcbmJ1dHRvbjpmb2N1cyB7XFxuICBjb2xvcjpyZ2JhKDg1LDE3MiwyMzggLDEpO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxuICBib3gtc2hhZG93OiAwIDJweCAycHggMCByZ2JhKDAsIDAsIDAsIC4xNCksXFxuICAgICAgICAgICAgICAwIDNweCAxcHggLTJweCByZ2JhKDAsIDAsIDAsIC4yKSxcXG4gICAgICAgICAgICAgIDAgMXB4IDVweCAwIHJnYmEoMCwgMCwgMCwgLjEyKTtcXG59XFxuI3Jlc3RhdXJhbnRzLWxpc3QgbGkgYnV0dG9uOmhvdmVyLCAjcmVzdGF1cmFudHMtbGlzdCBsaSAuYnV0dG9uOmZvY3VzLFxcbi5maWx0ZXItb3B0aW9ucyBzZWxlY3Q6aG92ZXIsIC5maWx0ZXItb3B0aW9ucyBzZWxlY3Q6Zm9jdXMsICNzdWJtaXQtZm9ybS1idG46aG92ZXIsICNzdWJtaXQtZm9ybS1idG46Zm9jdXMge1xcbiAgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDg1LDE3MiwyMzggLDEpO1xcbiAgY29sb3I6ICNmZmY7XFxuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcXG4gIGJveC1zaGFkb3c6IDAgMnB4IDJweCAwIHJnYmEoMCwgMCwgMCwgLjE0KSxcXG4gICAgICAgICAgICAgIDAgM3B4IDFweCAtMnB4IHJnYmEoMCwgMCwgMCwgLjIpLFxcbiAgICAgICAgICAgICAgMCAxcHggNXB4IDAgcmdiYSgwLCAwLCAwLCAuMTIpO1xcbn1cXG5cXG4vKiA9PT09PT09PT09PT09PT09PT09PT09IE5hdmlnYXRpb24gPT09PT09PT09PT09PT09PT09PT09PSAqL1xcbmhlYWRlciB7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBiYWNrZ3JvdW5kOiAjMzMzO1xcbn1cXG51bCB7XFxuICBwYWRkaW5nOiAwO1xcbiAgbGlzdC1zdHlsZTogbm9uZTtcXG59XFxuLm5hdmlnYXRpb24ge1xcbiAgZGlzcGxheTpmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgcGFkZGluZzogMCAxMHB4O1xcbiAgY29sb3I6IHJnYmEoMTE3LDExNywxMTcgLDEpO1xcbn1cXG4ubmF2aWdhdGlvbiBoMSB7XFxuIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gZm9udC1zaXplOiAxZW07XFxuIG1hcmdpbi1ib3R0b206IDA7XFxufVxcblxcbi5uYXZpZ2F0aW9uIGxpIHtcXG4gIGhlaWdodDogMTAwJTtcXG59XFxuXFxuLm5hdmlnYXRpb24gLm5hdmlnYXRpb25fX3RpdGxlIHtcXG4gZmxleC1ncm93OiAxO1xcbn1cXG4ubmF2aWdhdGlvbiBpbWcge1xcbiAgd2lkdGg6IDQ4cHg7XFxuICBoZWlnaHQ6IDQ4cHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXG59XFxuLm5hdmlnYXRpb24gaDEgYSB7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGZvbnQtc2l6ZTogNDhweDtcXG4gIGZvbnQtd2VpZ2h0OiAyMDA7XFxuICBsZXR0ZXItc3BhY2luZzogMTBweDtcXG4gIG1hcmdpbjogMTBweCBhdXRvO1xcbiAgZm9udC1mYW1pbHk6ICdQYWNpZmljbycsIGN1cnNpdmU7XFxufVxcbiNicmVhZGNydW1iIHtcXG4gICAgcGFkZGluZzogMTBweDtcXG4gICAgbGlzdC1zdHlsZTogbm9uZTtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXG4gICAgZm9udC1zaXplOiAxN3B4O1xcbiAgICBtYXJnaW46IDA7XFxuICAgIHdpZHRoOiAxMDAlO1xcbn1cXG5cXG4vKiBEaXNwbGF5IGxpc3QgaXRlbXMgc2lkZSBieSBzaWRlICovXFxuI2JyZWFkY3J1bWIgbGkge1xcbiAgICBkaXNwbGF5OiBpbmxpbmU7XFxufVxcblxcbi8qIEFkZCBhIHNsYXNoIHN5bWJvbCAoLykgYmVmb3JlL2JlaGluZCBlYWNoIGxpc3QgaXRlbSAqL1xcbiNicmVhZGNydW1iIGxpK2xpOmJlZm9yZSB7XFxuICAgIHBhZGRpbmc6IDhweDtcXG4gICAgY29sb3I6IGJsYWNrO1xcbiAgICBjb250ZW50OiBcXFwiL1xcXFwwMGEwXFxcIjtcXG59XFxuXFxuLyogQWRkIGEgY29sb3IgdG8gYWxsIGxpbmtzIGluc2lkZSB0aGUgbGlzdCAqL1xcbiNicmVhZGNydW1iIGxpIGEge1xcbiAgICBjb2xvcjogIzAyNzVkODtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbn1cXG5cXG4vKiBBZGQgYSBjb2xvciBvbiBtb3VzZS1vdmVyICovXFxuI2JyZWFkY3J1bWIgbGkgYTpob3ZlciB7XFxuICAgIGNvbG9yOiAjMDE0NDdlO1xcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcXG59XFxuLyogPT09PT09PT09PT09PT09PT09PT09PSBNYXAgPT09PT09PT09PT09PT09PT09PT09PSAqL1xcbiNtYXAge1xcbiAgaGVpZ2h0OiA0MDBweDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NjYztcXG59XFxuLyogPT09PT09PT09PT09PT09PT09PT09PSBSZXN0YXVyYW50IEZpbHRlcmluZyA9PT09PT09PT09PT09PT09PT09PT09ICovXFxuLmZpbHRlci1vcHRpb25zIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxufVxcbi5maWx0ZXItb3B0aW9ucyBoMiB7XFxuICBjb2xvcjogd2hpdGU7XFxuICBmb250LXNpemU6IDFyZW07XFxuICBmb250LXdlaWdodDogbm9ybWFsO1xcbiAgbGluZS1oZWlnaHQ6IDE7XFxuICBtYXJnaW46IDAgMTBweDtcXG4gIHBhZGRpbmctdG9wOiAxMHB4O1xcbn1cXG4uZmlsdGVyLW9wdGlvbnMgc2VsZWN0IHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2ZmZjtcXG4gIGZvbnQtZmFtaWx5OiBBcmlhbCxzYW5zLXNlcmlmO1xcbiAgZm9udC1zaXplOiAxMXB0O1xcbiAgaGVpZ2h0OiAzNXB4O1xcbiAgbGV0dGVyLXNwYWNpbmc6IDA7XFxuICBtYXJnaW46IDEwcHg7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgd2lkdGg6IDIwMHB4O1xcbn1cXG4uZmlsdGVyLWxhYmVsIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcblxcbi5maWx0ZXItc2VjdGlvbiB7XFxuICB3aWR0aDogMTAwJTtcXG59XFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PSBSZXN0YXVyYW50IExpc3RpbmcgPT09PT09PT09PT09PT09PT09PT09PSAqL1xcblxcbi8qPT09PT09PT1cXG49PT1GbGV4Ym94IG9uIGxpc3QgYW5kIGNvbnRlbnRcXG49PT09PT09PSovXFxuXFxuI3Jlc3RhdXJhbnRzLWxpc3Qge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtd3JhcDogd3JhcDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YzZjNmMztcXG4gIGxpc3Qtc3R5bGU6IG91dHNpZGUgbm9uZSBub25lO1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMzBweCAxNXB4IDYwcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcbiNyZXN0YXVyYW50cy1saXN0IGxpIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgZmxleC1ncm93OiAxO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGJvcmRlcjogMnB4IHNvbGlkICNjY2M7XFxuICBmb250LWZhbWlseTogQXJpYWwsc2Fucy1zZXJpZjtcXG4gIG1hcmdpbjogMTVweDtcXG4gIG1pbi1oZWlnaHQ6IDM4MHB4O1xcbiAgcGFkZGluZzogMCAzMHB4IDI1cHg7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcbiNyZXN0YXVyYW50cy1saXN0IC5yZXN0YXVyYW50LWltZyB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBtYXJnaW46IDA7XFxuICBtYXgtd2lkdGg6IDEwMCU7XFxuICBtYXgtaGVpZ2h0OiAzMDBweDtcXG4gIG1pbi13aWR0aDogMTAwJTtcXG59XFxuI3Jlc3RhdXJhbnRzLWxpc3QgbGkgaDEge1xcbiAgY29sb3I6ICNmMTgyMDA7XFxuICBmb250LWZhbWlseTogQXJpYWwsc2Fucy1zZXJpZjtcXG4gIGZvbnQtc2l6ZTogMTRwdDtcXG4gIGZvbnQtd2VpZ2h0OiAyMDA7XFxuICBsZXR0ZXItc3BhY2luZzogMDtcXG4gIGxpbmUtaGVpZ2h0OiAxLjM7XFxuICBtYXJnaW46IDIwcHggMCAxMHB4O1xcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG5cXG59XFxuI3Jlc3RhdXJhbnRzLWxpc3QgcCB7XFxuICBtYXJnaW46IDA7XFxuICBmb250LXNpemU6IDExcHQ7XFxufVxcbiNyZXN0YXVyYW50cy1saXN0IGxpIGJ1dHRvbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBvcmFuZ2U7XFxuICBib3JkZXItYm90dG9tOiAzcHggc29saWQgI2VlZTtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgZm9udC1zaXplOiAxMHB0O1xcbiAgbWFyZ2luOiAxNXB4IDAgMDtcXG4gIHBhZGRpbmc6IDhweCAzMHB4IDEwcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xcbn1cXG5cXG5cXG4vKiA9PT09PT09PT09PT09PT09PT09PT09IFJlc3RhdXJhbnQgRGV0YWlscyA9PT09PT09PT09PT09PT09PT09PT09ICovXFxuLmluc2lkZSBoZWFkZXIge1xcbiAgLypwb3NpdGlvbjogZml4ZWQ7Ki9cXG4gIC8qdG9wOiAwOyovXFxuICB3aWR0aDogMTAwJTtcXG4gIC8qei1pbmRleDogMTAwMDsqL1xcbn1cXG4uaW5zaWRlICNtYXAtY29udGFpbmVyIHtcXG4gIC8qYmFja2dyb3VuZDogYmx1ZSBub25lIHJlcGVhdCBzY3JvbGwgMCAwOyovXFxuICBoZWlnaHQ6IDIwMHB4O1xcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XFxufVxcbi5pbnNpZGUgI21hcCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcbi5pbnNpZGUgI2Zvb3RlciB7XFxuLyogIGJvdHRvbTogMDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTsqL1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcbiNyZXN0YXVyYW50LW5hbWUge1xcbiAgY29sb3I6ICNmMTgyMDA7XFxuICBmb250LWZhbWlseTogQXJpYWwsc2Fucy1zZXJpZjtcXG4gIGZvbnQtc2l6ZTogMjRwdDtcXG4gIGZvbnQtd2VpZ2h0OiAyMDA7XFxuICBsZXR0ZXItc3BhY2luZzogMDtcXG4gIG1hcmdpbjogMTBweCBhdXRvO1xcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG4gIGxpbmUtaGVpZ2h0OiAxLjE7XFxufVxcbiNyZXN0YXVyYW50LWltZyB7XFxuXFx0d2lkdGg6IDEwMCU7XFxuICBtYXgtaGVpZ2h0OiA4MHZoO1xcbn1cXG4jcmVzdGF1cmFudC1hZGRyZXNzIHtcXG4gIGZvbnQtc2l6ZTogMS4zZW07XFxuICBtYXJnaW46IDEwcHggMHB4O1xcbiAgd2lkdGg6IDUwJTtcXG59XFxuI3Jlc3RhdXJhbnQtY3Vpc2luZSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xcbiAgY29sb3I6ICNkZGQ7XFxuICBmb250LXNpemU6IDEuMmVtO1xcbiAgZm9udC13ZWlnaHQ6IDMwMDtcXG4gIGxldHRlci1zcGFjaW5nOiAxMHB4O1xcbiAgbWFyZ2luOiAwIDAgMjBweDtcXG4gIHBhZGRpbmc6IDJweCAwO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG5cXHR3aWR0aDogMTAwJTtcXG59XFxuI3Jlc3RhdXJhbnQtY29udGFpbmVyLCAjcmV2aWV3cy1jb250YWluZXIsICNyZXZpZXdzLWZvcm0tY29udGFpbmVye1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkOWQ5ZDk7XFxuICBib3JkZXItdG9wOiAxcHggc29saWQgI2ZmZjtcXG4gIHBhZGRpbmc6IDIwcHg7XFxuICB3aWR0aDogMTAwJTtcXG4gIGRpc3BsYXk6ZmxleDtcXG4gIGZsZXgtd3JhcDogd3JhcDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbn1cXG4jcmV2aWV3cy1jb250YWluZXIsICNyZXZpZXdzLWZvcm0tY29udGFpbmVyIHtcXG4gIHBhZGRpbmc6IDMwcHggNDBweCA0MHB4O1xcbn1cXG4jcmV2aWV3cy1jb250YWluZXIgaDIsICNyZXZpZXdzLWZvcm0tY29udGFpbmVyIGgyIHtcXG4gIGNvbG9yOiAjZjU4NTAwO1xcbiAgZm9udC1zaXplOiAyNHB0O1xcbiAgZm9udC13ZWlnaHQ6IDMwMDtcXG4gIGxldHRlci1zcGFjaW5nOiAtMXB4O1xcbiAgcGFkZGluZy1ib3R0b206IDFwdDtcXG4gIG1hcmdpbjogMCBhdXRvO1xcbn1cXG4jcmV2aWV3cy1saXN0IHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxufVxcbiNyZXZpZXdzLWxpc3QgbGkge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGJvcmRlcjogMnB4IHNvbGlkICNmM2YzZjM7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcXG4gIG1hcmdpbjogMCAwIDMwcHg7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgcGFkZGluZzogMTBweCAyMHB4IDIwcHg7XFxuICAvKnBvc2l0aW9uOiByZWxhdGl2ZTsqL1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcbiNyZXZpZXdzLWxpc3QgbGkgcCB7XFxuICBtYXJnaW46IDAgMCAxMHB4O1xcbn1cXG4jcmVzdGF1cmFudC1ob3VycyB7XFxuICB3aWR0aDogNTAlO1xcbn1cXG4jcmVzdGF1cmFudC1ob3VycyB0ZCB7XFxuICBjb2xvcjogIzY2NjtcXG4gIGZvbnQtc2l6ZTogMWVtO1xcbn1cXG5cXG4jY3JlYXRlLWVkaXQtcmV2aWV3LWZvcm0ge1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcbiNjcmVhdGUtZWRpdC1yZXZpZXctZm9ybSBsYWJlbCB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbjogMCBhdXRvO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZm9udC1zaXplOiAxcmVtO1xcbn1cXG5cXG4jY3JlYXRlLWVkaXQtcmV2aWV3LWZvcm0gaW5wdXQsICNjcmVhdGUtZWRpdC1yZXZpZXctZm9ybSB0ZXh0YXJlYSB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbjogMCBhdXRvO1xcbiAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcXG4gIHBhZGRpbmc6IDVweDtcXG4gIHdpZHRoOiA1MCU7XFxufVxcblxcbi5zdWJtaXQtZm9ybS1idXR0b24ge1xcbiAgICBkaXNwbGF5OmJsb2NrO1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIGJhY2tncm91bmQ6IG9yYW5nZTtcXG4gICAgcGFkZGluZzogMTBweDtcXG4gICAgd2lkdGg6IDIwJTtcXG4gICAgbWFyZ2luOiAxMHB4O1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbi8qLy8vLy8vLy8vL1xcbi8vIE1lZGlhIFF1ZXJpZXNcXG4vLy8vLy8vLy8vKi9cXG5cXG5AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMDAwcHgpIHtcXG4gICNyZXN0YXVyYW50cy1saXN0IGxpIHtcXG4gICAgbWF4LXdpZHRoOiAzMCU7XFxuICB9XFxufVxcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5OXB4KSBhbmQgKG1pbi13aWR0aDogNjcxcHgpIHtcXG4gICNyZXN0YXVyYW50cy1saXN0IGxpIHtcXG4gICAgbWluLXdpZHRoOiAyOTBweDtcXG4gICAgd2lkdGg6IDQ1JTtcXG4gICAgbWF4LXdpZHRoOiA0NSU7XFxuICB9XFxufVxcblxcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDY3MHB4KSB7XFxuICBoZWFkZXIge1xcbiAgICAvKm1pbi1oZWlnaHQ6IDUwcHg7Ki9cXG4gIH1cXG4gICNyZXN0YXVyYW50cy1saXN0IGxpIHtcXG4gICAgbWF4LXdpZHRoOiA4MCU7XFxuICAgIG1hcmdpbjogOHB4IGF1dG87XFxuICB9XFxuICAubmF2aWdhdGlvbiBoMSBhe1xcbiAgICBmb250LXNpemU6IDIuNmVtO1xcbiAgfVxcbiAgLm5hdmlnYXRpb24gaW1nIHtcXG4gICAgd2lkdGg6IDMwcHg7XFxuICAgIGhlaWdodDogMzBweDtcXG4gIH1cXG59XFxuXFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTQwcHgpIHtcXG5cXG4gIC5uYXZpZ2F0aW9uIGgxIGF7XFxuICAgIGZvbnQtc2l6ZTogMS43ZW07XFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIH1cXG4gIC5uYXZpZ2F0aW9uIGltZyB7XFxuICAgIGRpc3BsYXk6IG5vbmU7XFxuICB9XFxuICAuZmlsdGVyLW9wdGlvbnMgc2VsZWN0IHtcXG4gICAgd2lkdGg6IDUwJSk7XFxuICB9XFxuICAjcmVzdGF1cmFudC1jb250YWluZXIgaDEsICNyZXZpZXdzLWNvbnRhaW5lciBoMiB7XFxuICAgIGZvbnQtc2l6ZTogMS41ZW07XFxuICB9XFxuICAjcmVzdGF1cmFudC1pbWcge1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgaGVpZ2h0OiA0MDBweDtcXG4gIH1cXG4gICNyZXN0YXVyYW50LWFkZHJlc3Mge1xcbiAgICB3aWR0aDogMTAwJTtcXG4gIH1cXG4gICNyZXN0YXVyYW50LWhvdXJzIHtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICB9XFxuICAjcmVzdGF1cmFudC1ob3VycyB0ZCB7XFxuICAgIGZvbnQtc2l6ZTogMWVtO1xcbiAgfVxcbiAgI3Jlc3RhdXJhbnQtY3Vpc2luZSB7XFxuICAgIGZvbnQtc2l6ZTogMWVtO1xcbiAgfVxcbn1cXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0NTBweCkge1xcbiAgLmZpbHRlci1vcHRpb25zIHNlbGVjdCB7XFxuICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAyNHB4KTtcXG4gICAgbWFyZ2luOiAxMHB4O1xcbiAgfVxcbiAgI3Jldmlld3MtY29udGFpbmVyIHtcXG4gICAgcGFkZGluZzogMDtcXG4gIH1cXG59XFxuXCIsIFwiXCJdKTtcblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuICdAbWVkaWEgJyArIGl0ZW1bMl0gKyAneycgKyBjb250ZW50ICsgJ30nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICB9XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IG1vZHVsZXNbaV07IC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcbiAgICAgIC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG4gICAgICAvLyB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG4gICAgICAvLyBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cbiAgICAgIGlmIChpdGVtWzBdID09IG51bGwgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgaWYgKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgICAgaXRlbVsyXSA9ICcoJyArIGl0ZW1bMl0gKyAnKSBhbmQgKCcgKyBtZWRpYVF1ZXJ5ICsgJyknO1xuICAgICAgICB9XG5cbiAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJztcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuICByZXR1cm4gJy8qIyAnICsgZGF0YSArICcgKi8nO1xufSIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0LCBwYXJlbnQpIHtcbiAgaWYgKHBhcmVudCl7XG4gICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG4gIH1cbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbn07XG5cbnZhciBnZXRFbGVtZW50ID0gKGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbyA9IHt9O1xuXG5cdHJldHVybiBmdW5jdGlvbih0YXJnZXQsIHBhcmVudCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0LCBwYXJlbnQpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bdGFyZ2V0XVxuXHR9O1xufSkoKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcbiAgICAgICAgaWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEF0LmJlZm9yZSwgdGFyZ2V0KTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblxuXHRpZihvcHRpb25zLmF0dHJzLm5vbmNlID09PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgbm9uY2UgPSBnZXROb25jZSgpO1xuXHRcdGlmIChub25jZSkge1xuXHRcdFx0b3B0aW9ucy5hdHRycy5ub25jZSA9IG5vbmNlO1xuXHRcdH1cblx0fVxuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGdldE5vbmNlKCkge1xuXHRpZiAodHlwZW9mIF9fd2VicGFja19ub25jZV9fID09PSAndW5kZWZpbmVkJykge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cmV0dXJuIF9fd2VicGFja19ub25jZV9fO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJ1xuXHRcdCA/IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpIFxuXHRcdCA6IG9wdGlvbnMudHJhbnNmb3JtLmRlZmF1bHQob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoKSB7XG5cbiAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3NlcnZpY2V3b3JrZXIuYnVuZGxlLmpzJykudGhlbihyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgIGNvbnNvbGUubG9nKCdTVyByZWdpc3RlcmVkOiAnLCByZWdpc3RyYXRpb24pO1xuICAgICAgIGNvbnNvbGUubG9nKCdIRUxMTyBGUk9NIFJFR0lTVFJBVElPTiBKUycpO1xuICAgICB9KS5jYXRjaChyZWdpc3RyYXRpb25FcnJvciA9PiB7XG4gICAgICAgY29uc29sZS5sb2coJ1NXIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIHJlZ2lzdHJhdGlvbkVycm9yKTtcbiAgICAgfSk7XG4gICB9KTtcbiAgfVxuXG59KSgpO1xuXG5cbiIsImltcG9ydCAnLi9zdHlsZXMuY3NzJztcbmltcG9ydCByZWdpc3RyYXRpb24gZnJvbSAnLi9yZWdpc3RyYXRpb24nO1xuaW1wb3J0IERCSGVscGVyIGZyb20gJy4vZGJoZWxwZXInO1xuXG5sZXQgcmVzdGF1cmFudHMsXG4gIG5laWdoYm9yaG9vZHMsXG4gIGN1aXNpbmVzXG52YXIgbmV3TWFwO1xudmFyIG1hcmtlcnMgPSBbXTtcblxuLy8gY29uc3QgZGJQcm9taXNlID0gaWRiLm9wZW4oJ3JyLWRiJywgMSwgdXBncmFkZURCID0+IHtcbi8vICAgdmFyIHJlc3RhdXJhbnRzX3N0b3JlID0gdXBncmFkZURCLmNyZWF0ZU9iamVjdFN0b3JlKCdyZXN0YXVyYW50cycsIHsga2V5UGF0aDogJ2lkJyB9KTtcbi8vICAgcmVzdGF1cmFudHNfc3RvcmUuY3JlYXRlSW5kZXgoJ2lkJywgJ2lkJyk7XG5cbi8vICAgdmFyIHJldmlld3Nfc3RvcmUgPSB1cGdyYWRlREIuY3JlYXRlT2JqZWN0U3RvcmUoJ3Jldmlld3MnLCB7IGtleVBhdGg6ICdpZCcgfSk7XG4vLyAgIHJldmlld3Nfc3RvcmUuY3JlYXRlSW5kZXgoJ2lkJywgJ2lkJyk7XG4vLyAgIHJldmlld3Nfc3RvcmUuY3JlYXRlSW5kZXgoJ3Jlc3RhdXJhbnRfaWQnLCAncmVzdGF1cmFudF9pZCcpO1xuLy8gfSk7XG4vKipcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKGV2ZW50KSA9PiB7XG4gIGluaXRNYXAoKTsgLy8gYWRkZWRcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKCk7XG4gIGZldGNoQ3Vpc2luZXMoKTtcbiAgREJIZWxwZXIubmV4dFBlbmRpbmcoKTtcbn0pO1xuXG4vKipcbiAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cbiAqL1xuY29uc3QgZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xuICBEQkhlbHBlci5mZXRjaE5laWdoYm9yaG9vZHMoKGVycm9yLCBuZWlnaGJvcmhvb2RzKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHM7XG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXG4gKi9cbmNvbnN0IGZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xuICBzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlUmVzdGF1cmFudHMpO1xuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xuICAgIG9wdGlvbi52YWx1ZSA9IG5laWdoYm9yaG9vZDtcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XG4gIH0pO1xufVxuXG4vKipcbiAqIEZldGNoIGFsbCBjdWlzaW5lcyBhbmQgc2V0IHRoZWlyIEhUTUwuXG4gKi9cbmNvbnN0IGZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XG4gIERCSGVscGVyLmZldGNoQ3Vpc2luZXMoKGVycm9yLCBjdWlzaW5lcykgPT4ge1xuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzO1xuICAgICAgZmlsbEN1aXNpbmVzSFRNTCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogU2V0IGN1aXNpbmVzIEhUTUwuXG4gKi9cbmNvbnN0IGZpbGxDdWlzaW5lc0hUTUwgPSAoY3Vpc2luZXMgPSBzZWxmLmN1aXNpbmVzKSA9PiB7XG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcbiAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHVwZGF0ZVJlc3RhdXJhbnRzKTtcblxuICBjdWlzaW5lcy5mb3JFYWNoKGN1aXNpbmUgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBjdWlzaW5lO1xuICAgIG9wdGlvbi52YWx1ZSA9IGN1aXNpbmU7XG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIGxlYWZsZXQgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxuICovXG5jb25zdCBpbml0TWFwID0gKCkgPT4ge1xuICBuZXdNYXAgPSBMLm1hcCgnbWFwJywge1xuICAgICAgICBjZW50ZXI6IFs0MC43MjIyMTYsIC03My45ODc1MDFdLFxuICAgICAgICB6b29tOiAxMixcbiAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgfSk7XG4gIHNlbGYubmV3TWFwID0gbmV3TWFwO1xuICBMLnRpbGVMYXllcignaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC97aWR9L3t6fS97eH0ve3l9LmpwZzcwP2FjY2Vzc190b2tlbj17bWFwYm94VG9rZW59Jywge1xuICAgIG1hcGJveFRva2VuOiAncGsuZXlKMUlqb2lkMlZ1ZEdsdUlpd2lZU0k2SW1OcWFYSjBOMjVpWmpGd2RqWXphM0E0TUd0MWFIVTJiakVpZlEuRG5ORlVvTjV1encwMWxfWEtfYzduUScsXG4gICAgbWF4Wm9vbTogMTgsXG4gICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJyArXG4gICAgICAnPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCAnICtcbiAgICAgICdJbWFnZXJ5IMKpIDxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL1wiPk1hcGJveDwvYT4nLFxuICAgIGlkOiAnbWFwYm94LnN0cmVldHMnXG4gIH0pLmFkZFRvKG5ld01hcCk7XG5cbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcbn1cbi8qIHdpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICBsZXQgbG9jID0ge1xuICAgIGxhdDogNDAuNzIyMjE2LFxuICAgIGxuZzogLTczLjk4NzUwMVxuICB9O1xuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgem9vbTogMTIsXG4gICAgY2VudGVyOiBsb2MsXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gIH0pO1xuICB1cGRhdGVSZXN0YXVyYW50cygpO1xufSAqL1xuXG4vKipcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXG4gKi9cbmNvbnN0IHVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xuICBjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xuICBjb25zdCBuU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XG5cbiAgY29uc3QgY0luZGV4ID0gY1NlbGVjdC5zZWxlY3RlZEluZGV4O1xuICBjb25zdCBuSW5kZXggPSBuU2VsZWN0LnNlbGVjdGVkSW5kZXg7XG5cbiAgY29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZTtcbiAgY29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlO1xuXG4gIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpO1xuICAgICAgZmlsbFJlc3RhdXJhbnRzSFRNTCgpO1xuICAgIH1cbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhciBjdXJyZW50IHJlc3RhdXJhbnRzLCB0aGVpciBIVE1MIGFuZCByZW1vdmUgdGhlaXIgbWFwIG1hcmtlcnMuXG4gKi9cbmNvbnN0IHJlc2V0UmVzdGF1cmFudHMgPSAocmVzdGF1cmFudHMpID0+IHtcbiAgLy8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcbiAgdWwuaW5uZXJIVE1MID0gJyc7XG5cbiAgLy8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xuICBpZiAoc2VsZi5tYXJrZXJzKSB7XG4gICAgc2VsZi5tYXJrZXJzLmZvckVhY2gobWFya2VyID0+IG1hcmtlci5yZW1vdmUoKSk7XG4gIH1cbiAgc2VsZi5tYXJrZXJzID0gW107XG4gIHNlbGYucmVzdGF1cmFudHMgPSByZXN0YXVyYW50cztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJlc3RhdXJhbnRzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxuICovXG5jb25zdCBmaWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50cy1saXN0Jyk7XG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XG4gICAgY29uc29sZS5sb2cocmVzdGF1cmFudCk7XG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcbiAgfSk7XG4gIGFkZE1hcmtlcnNUb01hcCgpO1xufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXG4gKi9cbmNvbnN0IGNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xuICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHJlc3RhdXJhbnQubmFtZSk7XG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcbiAgY29uc29sZS5sb2coaW1hZ2Uuc3JjKTtcbiAgZGl2LmFwcGVuZChpbWFnZSk7XG4gIGxpLmFwcGVuZChkaXYpO1xuXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgbGkuYXBwZW5kKG5hbWUpO1xuXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xuICBsaS5hcHBlbmQobmVpZ2hib3Job29kKTtcblxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcbiAgbGkuYXBwZW5kKGFkZHJlc3MpO1xuXG4gIGNvbnNvbGUubG9nKFwiaXNfZmF2b3JpdGU6IFwiLCByZXN0YXVyYW50W1wiaXNfZmF2b3JpdGVcIl0pO1xuXG4gIGNvbnN0IGZhdkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBjb25zdCBpc0Zhdm9yaXRlID0gKHJlc3RhdXJhbnRbXCJpc19mYXZvcml0ZVwiXSAmJiByZXN0YXVyYW50W1wiaXNfZmF2b3JpdGVcIl0udG9TdHJpbmcoKSA9PT0gXCJ0cnVlXCIpID8gdHJ1ZSA6IGZhbHNlO1xuICBpZihyZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09PSBcInRydWVcIiB8fCByZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09PSB0cnVlKSB7XG4gICAgZmF2QnRuLmlubmVySFRNTCA9ICdGYXZvcml0ZWQhJztcbiAgICBmYXZCdG4uc3R5bGUuYmFja2dyb3VuZCA9ICdob3RwaW5rJztcbiAgfSBlbHNlIHtcbiAgICBmYXZCdG4uaW5uZXJIVE1MID0gJ0FkZCB0byBmYXZvcml0ZSc7XG4gICAgZmF2QnRuLnN0eWxlLmJhY2tncm91bmQgPSAnZ3JleSc7XG4gIH1cbiAgZmF2QnRuLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGB0b2dnbGUgZmF2b3JpdGVzIGZvcjogJHtyZXN0YXVyYW50Lm5hbWV9YCk7XG4gIGZhdkJ0bi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgZmF2LWJ0bi0ke3Jlc3RhdXJhbnQuaWR9YCk7XG4gIGZhdkJ0bi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJlc3RhdXJhbnQtaWRcIiwgcmVzdGF1cmFudC5pZCk7XG5cbiAgZmF2QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2NsaWNrZWQgZmF2YnRuJyk7XG4gICAgREJIZWxwZXIudG9nZ2xlRmF2QnRuKHJlc3RhdXJhbnQuaWQpO1xuICB9KVxuXG5cbiAgbGkuYXBwZW5kKGZhdkJ0bik7XG5cbiAgY29uc3QgbW9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBtb3JlLmNsYXNzTGlzdCA9IFwiYnV0dG9uIGJ1dHRvbi0tc3VjY2Vzc1wiO1xuICBtb3JlLmlubmVySFRNTCA9ICdWaWV3IERldGFpbHMnO1xuICBtb3JlLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgcmVzdGF1cmFudC5uYW1lICsgcmVzdGF1cmFudC5uZWlnaGJvcmhvb2QgKyByZXN0YXVyYW50LmFkZHJlc3MgKyBcIlZpZXcgRGV0YWlsc1wiKTtcbiAgbW9yZS5vbmNsaWNrID0gKCkgPT4ge1xuICAgIGNvbnN0IHVybCA9IERCSGVscGVyLnVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG4gICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICB9XG4gIGxpLmFwcGVuZChtb3JlKTtcblxuICByZXR1cm4gbGlcbn1cblxuLyoqXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxuICovXG5jb25zdCBhZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBuZXdNYXApO1xuICAgIG1hcmtlci5vbihcImNsaWNrXCIsIG9uQ2xpY2spO1xuICAgIGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci5vcHRpb25zLnVybDtcbiAgICB9XG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgfSk7XG59XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=